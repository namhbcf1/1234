<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <!-- Cache buster script -->
    <script src="clear-cache.js"></script>
    <!-- Đặt viewport cố định để hiển thị giao diện PC trên mọi thiết bị -->
    <meta name="viewport" content="width=1024">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Cache-Control" content="max-age=31536000, immutable">
    <meta name="description" content="Tự xây dựng cấu hình PC với công cụ TRUONG PHAT COMPUTER - Chọn linh kiện máy tính phù hợp nhu cầu và ngân sách">
    
    <title>BUILD PC TRUONG PHAT COMPUTER - Chọn Linh Kiện Máy Tính</title>
    
    <!-- DNS Prefetch và Preconnect -->
    <link rel="dns-prefetch" href="https://cdn.sheetjs.com">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://unpkg.com">
    
    <link rel="preconnect" href="https://cdn.sheetjs.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://unpkg.com" crossorigin>
    
    <!-- Preload CSS quan trọng -->
    <link rel="preload" href="./buildsan.css" as="style">
    <link rel="preload" href="./styles.css" as="style">
    
    <!-- Thư viện XLSX - Nhất định phải tải trước các script khác -->
    <script src="https://cdn.sheetjs.com/xlsx-0.18.9/package/dist/xlsx.full.min.js" defer></script>
    
    <!-- CSS chính -->
    <link rel="stylesheet" href="./buildsan.css">
    <link rel="stylesheet" href="./styles.css">
    
    <!-- Fix CSS để giải quyết vấn đề giao diện -->
    <link rel="stylesheet" href="./fix-styles.css">
    
    <!-- Chỉ load font awesome icons cần thiết thay vì toàn bộ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'">
    
    <!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    
    <!-- Progressive Web App -->
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#222831">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="apple-touch-icon" href="./images/icon-192.png">
    
    <!-- CSS cho modal/popup -->
    <link rel="stylesheet" href="./modal-styles.css" media="print" onload="this.media='all'">
    
    <!-- Animation library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" media="print" onload="this.media='all'">
    
    <!-- Fix CSS Layout -->
    <style>
        /* Reset header styling to match first image */
        header {
            background: linear-gradient(135deg, #0053b4, #0275d8);
            padding: 15px 0;
        }
        
        /* Logo styling */
        header .logo {
            background-color: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 10px;
            display: inline-flex;
            align-items: center;
        }
        
        /* Fix main container layout */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Fix navigation items */
        .nav-items {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        
        .nav-item {
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 80px;
            height: 80px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            cursor: pointer;
        }
        
        .nav-item.active {
            background-color: #007bff;
            color: white;
        }
        
        /* Fix budget range slider */
        .budget-section {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        /* CPU selection styling */
        .cpu-selection {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .cpu-options {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }
        
        .cpu-option {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }
        
        .cpu-option.selected {
            border-color: #007bff;
            background-color: rgba(0, 123, 255, 0.1);
        }
        
        /* Game selection styling */
        .game-selection {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .game-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        /* Fix dark mode toggle */
        .dark-mode-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
        }
        
        /* Ensure main game cards look correct */
        .game-card {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            cursor: pointer;
            height: 150px;
        }
        
        .game-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .game-title {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
        }
        
        /* Fix for configuration tables */
        #component-table, #configuration-table, .config-table {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        /* Style fixes for tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        table th, table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        table th {
            background-color: #f8f9fa;
            font-weight: 600;
        }
        
        /* Fix for modal windows */
        .modal-content {
            display: block !important;
        }
    </style>
    
    <!-- Service Worker Registration -->
    <script>
        // Đăng ký Service Worker nếu trình duyệt hỗ trợ
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                try {
                    // Unregister any existing service workers first
                    const registrations = await navigator.serviceWorker.getRegistrations();
                    for (let registration of registrations) {
                        await registration.unregister();
                        console.log('Existing service worker unregistered');
                    }
                    
                    // Lấy đường dẫn cơ sở của ứng dụng (để hỗ trợ GitHub Pages)
                    const basePath = location.pathname.substring(0, location.pathname.lastIndexOf('/') + 1);
                    
                    // Add cache-busting parameter to service worker URL
                    const swUrl = `./service-worker.js?v=${new Date().getTime()}`;
                    
                    // Register the service worker with updated URL
                    const registration = await navigator.serviceWorker.register(swUrl, { 
                        scope: basePath,
                        updateViaCache: 'none' // Prevent cache for updates
                    });
                    
                    console.log('Service Worker đã đăng ký thành công:', registration);
                    
                    // Force update check immediately
                    registration.update();
                } catch (error) {
                    console.error('Lỗi đăng ký Service Worker:', error);
                }
            });
        }
        
        // Đảm bảo rằng các bảng cấu hình hiển thị đúng
        document.addEventListener('DOMContentLoaded', function() {
            // Force show configuration tables after page load
            setTimeout(function() {
                const tables = document.querySelectorAll('#component-table, #configuration-table, .config-table');
                tables.forEach(table => {
                    if (table) {
                        table.style.display = 'block';
                        table.style.visibility = 'visible';
                        table.style.opacity = '1';
                    }
                });
                
                // Kiểm tra trạng thái các button
                const calculateBtn = document.querySelector('#calculate-btn, .calculate-btn, button[onclick*="showConfig"]');
                if (calculateBtn) {
                    calculateBtn.click();
                }
                
                console.log('Config table display set to block on page load');
            }, 1500);
        });
    </script>

    <style id="force-display-styles">
    /* Force display of all tables and components - but NOT modals */
    table, #component-table, #configuration-table, .config-table, .component-table,
    .table-container, .table-responsive, .component-selection-container, .config-section {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
    }

    /* Ensure tables display as tables */
    table {
        display: table !important;
        width: 100% !important;
        border-collapse: collapse !important;
    }

    tr {
        display: table-row !important;
    }

    td, th {
        display: table-cell !important;
        padding: 8px !important;
        border: 1px solid #ddd !important;
    }

    /* Don't force modal visibility - allow them to be toggled properly */
    .modal, .modal-content, .modal-body, #configuration-detail-modal {
        /* Remove the forced display */
        display: none;
    }
    </style>

    <style>
    /* Enhanced styling for the three main step sections */
    .selection-section.accent-section {
        margin: 40px auto !important;
        border-radius: 12px !important;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15) !important;
        transform: translateZ(0);
        transition: transform 0.3s ease, box-shadow 0.3s ease !important;
        overflow: hidden !important;
        position: relative !important;
    }

    .selection-section.accent-section:hover {
        transform: translateY(-5px) !important;
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.25) !important;
    }

    .selection-section.accent-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 8px;
        background: linear-gradient(90deg, #4CAF50, #2196F3, #9C27B0);
        z-index: 1;
    }

    .section-header {
        background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d) !important;
        padding: 25px 20px !important;
        border-radius: 8px 8px 0 0 !important;
        position: relative !important;
        overflow: hidden !important;
    }

    .section-header h2 {
        color: white !important;
        font-size: 1.8rem !important;
        font-weight: 700 !important;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3) !important;
        margin: 0 !important;
        position: relative !important;
        z-index: 2 !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
    }

    .section-header i {
        font-size: 2.2rem !important;
        margin-right: 15px !important;
        color: #ffeb3b !important;
        text-shadow: 0 0 10px rgba(255, 235, 59, 0.6) !important;
        animation: pulse 2s infinite !important;
    }

    @keyframes pulse {
        0% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.1);
        }
        100% {
            transform: scale(1);
        }
    }

    #budget-range-selection, #cpu-type-selection, #game-selection {
        background-color: #ffffff !important;
        border: none !important;
    }

    .slider-container, .cpu-brand-selection, .game-grid {
        padding: 30px 20px !important;
    }

    /* Specific styling for budget range slider */
    .slider {
        height: 15px !important;
        border-radius: 10px !important;
        background: linear-gradient(90deg, #81c784, #4caf50, #2e7d32) !important;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2) !important;
    }

    .slider::-webkit-slider-thumb {
        width: 30px !important;
        height: 30px !important;
        background: #fff !important;
        border: 3px solid #4CAF50 !important;
        box-shadow: 0 0 10px rgba(76, 175, 80, 0.5) !important;
    }

    /* Specific styling for CPU selection */
    .brand-option {
        transform: translateZ(0);
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) !important;
        border: 3px solid transparent !important;
        border-radius: 12px !important;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1) !important;
        padding: 25px 15px !important;
    }

    .brand-option:hover {
        transform: translateY(-8px) scale(1.03) !important;
    }

    /* Specific styling for game selection grid */
    .game-card {
        border-radius: 10px !important;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1) !important;
        overflow: hidden !important;
        transition: all 0.4s ease !important;
        transform: translateZ(0);
    }

    .game-card:hover {
        transform: translateY(-5px) scale(1.05) !important;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15) !important;
        z-index: 5 !important;
    }

    .game-card .game-image {
        height: 120px !important;
        position: relative !important;
    }

    .game-card .game-image::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 30%;
        background: linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent);
    }

    .game-card .game-name {
        font-weight: bold !important;
        padding: 10px !important;
        background: #f5f5f5 !important;
    }
    </style>
</head>

<body>


    <header>
        <div class="logo-container">
            <div class="logo">
                <i class="fas fa-desktop fa-spin"></i>
                <span>TRUONG PHAT COMPUTER</span>
            </div>
            <button id="dark-mode-toggle" title="Chuyển chế độ sáng/tối" style="margin-left:20px;font-size:1.5em;background:none;border:none;cursor:pointer;color:#fff;"><i class="fas fa-moon"></i></button>
        </div>
        <div class="contact-buttons">
            <a href="https://zalo.me/0836768597" target="_blank" class="contact-button">
                <i class="fab fa-zalo"></i> Liên hệ qua Zalo
            </a>
            <div class="phone-number">
                <a href="tel:0836768597">
                    <i class="fas fa-phone-alt"></i>
                    <span>0836768597</span>
                </a>
            </div>
            <a href="https://www.facebook.com/tpcom.hb" target="_blank" class="contact-button">
                <i class="fab fa-facebook"></i> Liên hệ qua Facebook
            </a>
        </div>
    </header>

    <div class="main-container">
        <div class="page-title">
            <h1><i class="fas fa-tools"></i> XÂY DỰNG CẤU HÌNH PC <i class="fas fa-tools"></i></h1>
            <p class="subtitle">Tùy chỉnh theo nhu cầu và ngân sách của bạn</p>
        </div>

        <div class="container">
            <div class="build-progress">
                <div class="progress-step active" data-step="1">
                    <div class="step-icon"><i class="fas fa-money-bill-wave"></i></div>
                    <div class="step-label">Ngân sách</div>
                </div>
                <div class="progress-step" data-step="2">
                    <div class="step-icon"><i class="fas fa-microchip"></i></div>
                    <div class="step-label">CPU</div>
                </div>
                <div class="progress-step" data-step="3">
                    <div class="step-icon"><i class="fas fa-gamepad"></i></div>
                    <div class="step-label">Game</div>
                </div>
                <div class="progress-step" data-step="4">
                    <div class="step-icon"><i class="fas fa-laptop-code"></i></div>
                    <div class="step-label">Linh kiện</div>
                </div>
                <div class="progress-step" data-step="5">
                    <div class="step-icon"><i class="fas fa-check-circle"></i></div>
                    <div class="step-label">Hoàn thành</div>
                </div>
            </div>

            <!-- Phần tầm tiền -->
            <section id="budget-range-selection" class="selection-section accent-section">
                <div class="section-header">
                    <i class="fas fa-money-bill-wave"></i>
                    <h2>BƯỚC 1: Chọn Cấu Hình Tầm Tiền Mong Muốn</h2>
                </div>
                <div class="slider-container">
                    <div class="slider-value-container">
                        <span id="budget-value-min">3 triệu</span>
                        <span id="budget-value" class="budget-value-current">3 triệu</span>
                        <span id="budget-value-max">30 triệu</span>
                    </div>
                    <input type="range" id="budget-range" min="3000000" max="30000000" step="1000000" value="3000000" class="slider">
                    <div class="slider-ticks">
                        <span>3M</span>
                        <span>10M</span>
                        <span>20M</span>
                        <span>30M</span>
                    </div>
                </div>
            </section>

            <!-- Phần chọn loại CPU -->
            <section id="cpu-type-selection" class="selection-section accent-section">
                <div class="section-header">
                    <i class="fas fa-microchip"></i>
                    <h2>BƯỚC 2: Chọn Loại CPU</h2>
                </div>
                <div class="cpu-brand-selection">
                    <div class="brand-option" id="intel-option" onclick="handleCpuSelection('Intel')">
                        <div class="brand-logo">
                            <img src="images/intel.jpg" alt="Intel Logo" style="height:48px;width:auto;object-fit:contain;" onerror="this.style.display='none';this.parentNode.innerHTML='<i class=\'fab fa-intel\'></i>'">
                        </div>
                        <div class="brand-name">INTEL</div>
                    </div>
                    <div class="brand-option" id="amd-option" onclick="handleCpuSelection('Amd')">
                        <div class="brand-logo">
                            <img src="images/amd.jpg" alt="AMD Logo" style="height:48px;width:auto;object-fit:contain;" onerror="this.style.display='none';this.parentNode.innerHTML='<i class=\'fab fa-amd\'></i>'">
                        </div>
                        <div class="brand-name">AMD</div>
                    </div>
                </div>
                <select id="cpu-type" name="cpu-type" class="dropdown hidden-dropdown" required>
                    <option value="Intel">INTEL</option>
                    <option value="Amd">AMD</option>
                </select>
            </section>

            <!-- Inline script để đảm bảo sự kiện click luôn hoạt động -->
            <script>
                function handleCpuSelection(type) {
                    console.log('Direct CPU selection click:', type);
                    
                    // Update visual UI immediately
                    const intelOption = document.getElementById('intel-option');
                    const amdOption = document.getElementById('amd-option');
                    const cpuTypeDropdown = document.getElementById('cpu-type');
                    
                    if (type === 'Intel') {
                        intelOption.classList.add('selected');
                        amdOption.classList.remove('selected');
                        if (cpuTypeDropdown) cpuTypeDropdown.value = 'Intel';
                    } else {
                        amdOption.classList.add('selected');
                        intelOption.classList.remove('selected');
                        if (cpuTypeDropdown) cpuTypeDropdown.value = 'Amd';
                    }
                    
                    // Trigger CPU-type change event
                    if (cpuTypeDropdown) {
                        cpuTypeDropdown.dispatchEvent(new Event('change'));
                    }
                    
                    // Use a small timeout to ensure event-handlers.js has loaded
                    setTimeout(() => {
                        // Call the global handler function if available
                        if (typeof window.handleCpuTypeSelection === 'function') {
                            console.log('Calling global handleCpuTypeSelection with:', type);
                            window.handleCpuTypeSelection(type);
                        } else {
                            console.warn('Global handleCpuTypeSelection function not found! Using fallback...');
                            
                            // Fallback: Apply basic UI changes
                            document.body.setAttribute('data-selected-cpu-type', type);
                            document.body.setAttribute('data-current-cpu-type', type);
                            
                            // Create permanent indicator
                            const existingIndicator = document.getElementById('permanent-cpu-indicator');
                            if (existingIndicator) existingIndicator.remove();
                            
                            const cpuIndicator = document.createElement('div');
                            cpuIndicator.style.position = 'fixed';
                            cpuIndicator.style.bottom = '20px';
                            cpuIndicator.style.right = '20px';
                            cpuIndicator.style.padding = '15px 20px';
                            cpuIndicator.style.backgroundColor = type === 'Intel' ? '#0071c5' : '#ED1C24';
                            cpuIndicator.style.color = 'white';
                            cpuIndicator.style.fontWeight = 'bold';
                            cpuIndicator.style.fontSize = '18px';
                            cpuIndicator.style.zIndex = '10000';
                            cpuIndicator.style.borderRadius = '5px';
                            cpuIndicator.style.boxShadow = '0 0 15px rgba(0,0,0,0.5)';
                            cpuIndicator.id = 'permanent-cpu-indicator';
                            cpuIndicator.textContent = `${type.toUpperCase()} MODE`;
                            document.body.appendChild(cpuIndicator);
                            
                            // Try to reload config with selected CPU
                            try {
                                const gameId = document.getElementById('game-genre')?.value;
                                const budget = parseInt(document.getElementById('budget-range')?.value);
                                if (typeof window.autoSelectConfig === 'function' && gameId && budget) {
                                    window.autoSelectConfig(gameId, budget, type);
                                }
                            } catch (e) {
                                console.error('Error in fallback config selection:', e);
                            }
                        }
                    }, 100);
                }
                
                // Thêm CSS động để làm nổi bật nút được chọn
                const style = document.createElement('style');
                style.textContent = `
                    .brand-option {
                        cursor: pointer !important;
                        transition: all 0.3s ease;
                        border: 3px solid transparent;
                        position: relative;
                        z-index: 5;
                    }
                    .brand-option:hover {
                        transform: translateY(-5px);
                        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                    }
                    .brand-option.selected {
                        border-color: #4CAF50;
                        box-shadow: 0 0 15px rgba(76, 175, 80, 0.5);
                    }
                    #intel-option.selected {
                        border-color: #0071c5;
                        box-shadow: 0 0 15px rgba(0, 113, 197, 0.5);
                    }
                    #amd-option.selected {
                        border-color: #ED1C24;
                        box-shadow: 0 0 15px rgba(237, 28, 36, 0.5);
                    }
                    .brand-option::after {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        z-index: 10;
                    }
                `;
                document.head.appendChild(style);
                
                // Handle direct clicks with redundant event listeners
                document.addEventListener('DOMContentLoaded', function() {
                    // Add redundant click handlers to ensure clicks work
                    document.querySelectorAll('#intel-option, #amd-option').forEach(el => {
                        el.addEventListener('click', function(e) {
                            const type = this.id === 'intel-option' ? 'Intel' : 'Amd';
                            console.log(`Extra click handler for ${type} activated`);
                            handleCpuSelection(type);
                            e.preventDefault();
                            e.stopPropagation();
                        });
                    });
                    
                    // Set a hard-coded click handler on document
                    document.addEventListener('click', function(e) {
                        const intelOption = document.getElementById('intel-option');
                        const amdOption = document.getElementById('amd-option');
                        
                        if (e.target && (e.target === intelOption || intelOption.contains(e.target))) {
                            console.log('Document-level Intel click detected');
                            handleCpuSelection('Intel');
                        } else if (e.target && (e.target === amdOption || amdOption.contains(e.target))) {
                            console.log('Document-level AMD click detected');
                            handleCpuSelection('Amd');
                        }
                    });
                });
            </script>

            <!-- Phần chọn game -->
            <section id="game-selection" class="selection-section accent-section">
                <div class="section-header">
                    <i class="fas fa-gamepad"></i>
                    <h2>BƯỚC 3: Chọn Game Muốn Chơi</h2>
                </div>
                <div class="game-grid">
                    <div class="game-card" data-game="valorant">
                        <div class="game-image" style="background-image: url('images/valorant.jpg'); background-size: cover; background-position: center; height: 100px;"></div>
                        <div class="game-name">Valorant</div>
                    </div>
                    <div class="game-card" data-game="csgo">
                        <div class="game-image" style="background-image: url('images/csgo.jpg'); background-size: cover; background-position: center; height: 100px;"></div>
                        <div class="game-name">CS:GO</div>
                    </div>
                    <div class="game-card" data-game="pubg">
                        <div class="game-image" style="background-image: url('images/pubg.jpg'); background-size: cover; background-position: center; height: 100px;"></div>
                        <div class="game-name">PUBG</div>
                    </div>
                    <div class="game-card" data-game="lol">
                        <div class="game-image" style="background-image: url('images/lol.jpg'); background-size: cover; background-position: center; height: 100px;"></div>
                        <div class="game-name">Liên Minh Huyền Thoại</div>
                    </div>
                    <div class="game-card" data-game="gta-v">
                        <div class="game-image" style="background-image: url('images/gta-v.jpg'); background-size: cover; background-position: center; height: 100px;"></div>
                        <div class="game-name">GTA V</div>
                    </div>
                    <div class="game-card" data-game="elden-ring">
                        <div class="game-image" style="background-image: url('images/elden-ring.jpg'); background-size: cover; background-position: center; height: 100px;"></div>
                        <div class="game-name">Elden Ring</div>
                    </div>
                    <div class="game-card" data-game="naraka">
                        <div class="game-image" style="background-image: url('images/naraka.jpg'); background-size: cover; background-position: center; height: 100px;"></div>
                        <div class="game-name">Naraka: Bladepoint</div>
                    </div>
                    <div class="game-card" data-game="genshin">
                        <div class="game-image" style="background-image: url('images/genshin.jpg'); background-size: cover; background-position: center; height: 100px;"></div>
                        <div class="game-name">Genshin Impact</div>
                    </div>
                    <div class="game-card" data-game="fo4">
                        <div class="game-image" style="background-image: url('images/fo4.jpg'); background-size: cover; background-position: center; height: 100px;"></div>
                        <div class="game-name">FIFA Online 4</div>
                    </div>
                    <div class="game-card" data-game="black-myth-wukong">
                        <div class="game-image" style="background-image: url('images/black-myth-wukong.jpg'); background-size: cover; background-position: center; height: 100px;"></div>
                        <div class="game-name">Black Myth: Wukong</div>
                    </div>
                    <div class="game-card" data-game="god-of-war">
                        <div class="game-image" style="background-image: url('images/god-of-war.jpg'); background-size: cover; background-position: center; height: 100px;"></div>
                        <div class="game-name">God of War</div>
                    </div>
                    <div class="game-card" data-game="battle-teams-2">
                        <div class="game-image" style="background-image: url('images/battle-teams-2.jpg'); background-size: cover; background-position: center; height: 100px;"></div>
                        <div class="game-name">Battle Teams 2</div>
                    </div>
                    <div class="game-card" data-game="delta-force">
                        <div class="game-image" style="background-image: url('images/delta-force.jpg'); background-size: cover; background-position: center; height: 100px;"></div>
                        <div class="game-name">Delta Force</div>
                    </div>
                    <div class="game-card" data-game="audition">
                        <div class="game-image" style="background-image: url('images/audition.jpg'); background-size: cover; background-position: center; height: 100px;"></div>
                        <div class="game-name">Audition</div>
                    </div>
                    <div class="game-card" data-game="mu-origin">
                        <div class="game-image" style="background-image: url('images/mu-origin.jpg'); background-size: cover; background-position: center; height: 100px;"></div>
                        <div class="game-name">MU Origin</div>
                    </div>
                    <div class="game-card" data-game="crossfire">
                        <div class="game-image" style="background-image: url('images/crossfire.jpg'); background-size: cover; background-position: center; height: 100px;"></div>
                        <div class="game-name">CrossFire</div>
                    </div>
                </div>
                <select id="game-genre" name="game-genre" class="dropdown hidden-dropdown" required>
                    <option value="">Chọn game</option>
                    <option value="valorant">Valorant</option>
                    <option value="csgo">CS:GO</option>
                    <option value="pubg">PUBG</option>
                    <option value="lol">Liên Minh Huyền Thoại (LOL)</option>
                    <option value="gta-v">GTA V</option>
                    <option value="elden-ring">Elden Ring</option>
                    <option value="naraka">Naraka: Bladepoint</option>
                    <option value="genshin">Genshin Impact</option>
                    <option value="fo4">FIFA Online 4</option>
                    <option value="black-myth-wukong">Black Myth: Wukong</option>
                    <option value="god-of-war">God of War</option>
                    <option value="battle-teams-2">Battle Teams 2</option>
                    <option value="delta-force">Delta Force</option>
                    <option value="audition">Audition</option>
                    <option value="mu-origin">MU Origin</option>
                    <option value="crossfire">CrossFire</option>
                </select>
                
                <div class="auto-select-container" style="margin-top: 20px; text-align: center;">
                    <button id="manual-auto-select" class="action-button primary-btn" style="display: inline-block; padding: 10px 20px;">
                        <i class="fas fa-magic"></i> Tự Động Chọn Cấu Hình
                    </button>
                </div>
            </section>

            <section id="component-selection" class="selection-section">
                <div class="section-header">
                    <i class="fas fa-laptop-code"></i>
                    <h2>Lựa Chọn Linh Kiện Chính</h2>
                </div>
                <div class="container">
                    <div id="socket-message" class="warning-message" style="display: none; margin: 10px 0; padding: 10px; background-color: #fff3cd; border-radius: 5px; color: #856404;"></div>
                    <div class="components-grid">
                        <div class="component">
                            <div class="component-header">
                                <i class="fas fa-microchip"></i>
                                <h3>CPU</h3>
                                <div class="compatibility-icon" id="cpu-compatibility"><i class="fas fa-check-circle"></i></div>
                            </div>
                            <select id="cpu" name="cpu" class="dropdown">
                                <option value="" disabled selected>Chọn CPU</option>
                            </select>
                            <div class="component-info-hover" id="cpu-info">
                                <div class="specs-preview"></div>
                            </div>
                        </div>

                        <div class="component">
                            <div class="component-header">
                                <i class="fas fa-server"></i>
                                <h3>Mainboard</h3>
                                <div class="compatibility-icon" id="mainboard-compatibility"><i class="fas fa-check-circle"></i></div>
                            </div>
                            <select id="mainboard" name="mainboard" class="dropdown">
                                <option value="" disabled selected>Chọn Mainboard</option>
                            </select>
                            <div class="component-info-hover" id="mainboard-info">
                                <div class="specs-preview"></div>
                            </div>
                        </div>

                        <div class="component">
                            <div class="component-header">
                                <i class="fas fa-tv"></i>
                                <h3>Card Đồ Họa (VGA)</h3>
                                <div class="compatibility-icon" id="vga-compatibility"><i class="fas fa-check-circle"></i></div>
                            </div>
                            <select id="vga" name="vga" class="dropdown">
                                <option value="" disabled selected>Chọn VGA</option>
                            </select>
                            <div class="component-info-hover" id="vga-info">
                                <div class="specs-preview"></div>
                            </div>
                        </div>

                        <div class="component">
                            <div class="component-header">
                                <i class="fas fa-memory"></i>
                                <h3>RAM</h3>
                                <div class="compatibility-icon" id="ram-compatibility"><i class="fas fa-check-circle"></i></div>
                            </div>
                            <select id="ram" name="ram" class="dropdown">
                                <option value="" disabled selected>Chọn RAM</option>
                            </select>
                            <div class="component-info-hover" id="ram-info">
                                <div class="specs-preview"></div>
                            </div>
                        </div>

                        <div class="component">
                            <div class="component-header">
                                <i class="fas fa-hdd"></i>
                                <h3>Ổ Cứng SSD</h3>
                                <div class="compatibility-icon" id="ssd-compatibility"><i class="fas fa-check-circle"></i></div>
                            </div>
                            <select id="ssd" name="ssd" class="dropdown">
                                <option value="" disabled selected>Chọn SSD</option>
                            </select>
                            <div class="component-info-hover" id="ssd-info">
                                <div class="specs-preview"></div>
                            </div>
                        </div>

                        <div class="component">
                            <div class="component-header">
                                <i class="fas fa-bolt"></i>
                                <h3>Nguồn (PSU)</h3>
                                <div class="compatibility-icon" id="psu-compatibility"><i class="fas fa-check-circle"></i></div>
                            </div>
                            <select id="psu" name="psu" class="dropdown">
                                <option value="" disabled selected>Chọn PSU</option>
                            </select>
                            <div class="component-info-hover" id="psu-info">
                                <div class="specs-preview"></div>
                            </div>
                        </div>

                        <div class="component">
                            <div class="component-header">
                                <i class="fas fa-cube"></i>
                                <h3>Vỏ Case</h3>
                                <div class="compatibility-icon" id="case-compatibility"><i class="fas fa-check-circle"></i></div>
                            </div>
                            <select id="case" name="case" class="dropdown">
                                <option value="" disabled selected>Chọn Case</option>
                            </select>
                            <div class="component-info-hover" id="case-info">
                                <div class="specs-preview"></div>
                            </div>
                        </div>

                        <div class="component">
                            <div class="component-header">
                                <i class="fas fa-wind"></i>
                                <h3>Tản Nhiệt CPU</h3>
                                <div class="compatibility-icon" id="cpuCooler-compatibility"><i class="fas fa-check-circle"></i></div>
                            </div>
                            <select id="cpuCooler" name="cpuCooler" class="dropdown">
                                <option value="" disabled selected>Chọn Tản Nhiệt CPU</option>
                            </select>
                            <div class="component-info-hover" id="cpuCooler-info">
                                <div class="specs-preview"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="additional-selection" class="selection-section">
                <div class="section-header">
                    <i class="fas fa-plus-circle"></i>
                    <h2>Lựa Chọn Thêm (Tùy Chọn)</h2>
                </div>
                <div class="container">
                    <div class="components-grid">
                        <div class="component">
                            <div class="component-header">
                                <i class="fas fa-database"></i>
                                <h3>HDD</h3>
                            </div>
                            <select id="hdd" name="hdd" class="dropdown">
                                <option value="" disabled selected>Chọn HDD</option>
                            </select>
                            <div class="component-info-hover" id="hdd-info">
                                <div class="specs-preview"></div>
                            </div>
                        </div>

                        <div class="component">
                            <div class="component-header">
                                <i class="fas fa-desktop"></i>
                                <h3>Màn Hình</h3>
                            </div>
                            <select id="monitor" name="monitor" class="dropdown">
                                <option value="" disabled selected>Chọn Màn Hình</option>
                            </select>
                            <div class="component-info-hover" id="monitor-info">
                                <div class="specs-preview"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTIONS REMOVED AS REQUESTED -->
            
            <!-- Bảng chi tiết cấu hình -->
            <div id="config-table" class="config-table" style="display:none; margin: 20px auto; max-width: 90%; overflow-x: auto; background-color: white; box-shadow: 0 0 15px rgba(0,0,0,0.2); border-radius: 8px;">
                <div style="text-align: center; padding: 15px; background-color: #222; color: #f44336; font-weight: bold; font-size: 18px; border-top-left-radius: 8px; border-top-right-radius: 8px;">
                    <i class="fas fa-desktop"></i> TRƯỜNG PHÁT COMPUTER XIN GỬI BẢNG CHI TIẾT CẤU HÌNH MÁY TÍNH
                </div>
                
                <!-- Current date and time in Vietnam (GMT+7) -->
                <div id="current-datetime" style="text-align: center; padding: 10px; background-color: #333; color: #fff; font-size: 16px; border-bottom: 1px solid #555;">
                     <span id="datetime-value"></span>
                </div>
                
                <table style="width: 100%; border-collapse: collapse; background-color: #222; color: white;">
                    <thead>
                        <tr style="background-color: #2196F3; color: white;">
                            <th style="padding: 12px; text-align: center; border: 1px solid #ddd; width: 5%;">STT</th>
                            <th style="padding: 12px; text-align: center; border: 1px solid #ddd; width: 10%;">HÌNH ẢNH</th>
                            <th style="padding: 12px; text-align: center; border: 1px solid #ddd; width: 25%;">TÊN, MÃ, LOẠI LINH KIỆN</th>
                            <th style="padding: 12px; text-align: center; border: 1px solid #ddd; width: 5%;">ĐVT</th>
                            <th style="padding: 12px; text-align: center; border: 1px solid #ddd; width: 5%;">SỐ LƯỢNG</th>
                            <th style="padding: 12px; text-align: center; border: 1px solid #ddd; width: 12%;">ĐƠN GIÁ</th>
                            <th style="padding: 12px; text-align: center; border: 1px solid #ddd; width: 12%;">THÀNH TIỀN</th>
                            <th style="padding: 12px; text-align: center; border: 1px solid #ddd; width: 10%;">BẢO HÀNH</th>
                            <th style="padding: 12px; text-align: center; border: 1px solid #ddd; width: 8%;">GHI CHÚ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="background-color: #f9f9f9;">
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">1</td>
                            <td id="cpu-image" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="cpu-name" style="padding: 10px; border: 1px solid #ddd;"></td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">Chiếc</td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">1</td>
                            <td id="cpu-price" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="cpu-total" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="cpu-warranty" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="cpu-condition" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">2</td>
                            <td id="mainboard-image" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="mainboard-name" style="padding: 10px; border: 1px solid #ddd;"></td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">Chiếc</td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">1</td>
                            <td id="mainboard-price" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="mainboard-total" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="mainboard-warranty" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="mainboard-condition" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">3</td>
                            <td id="ram-image" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="ram-name" style="padding: 10px; border: 1px solid #ddd;"></td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">Chiếc</td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">1</td>
                            <td id="ram-price" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="ram-total" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="ram-warranty" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="ram-condition" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">4</td>
                            <td id="vga-image" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="vga-name" style="padding: 10px; border: 1px solid #ddd;"></td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">Chiếc</td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">1</td>
                            <td id="vga-price" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="vga-total" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="vga-warranty" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="vga-condition" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">5</td>
                            <td id="ssd-image" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="ssd-name" style="padding: 10px; border: 1px solid #ddd;"></td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">Chiếc</td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">1</td>
                            <td id="ssd-price" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="ssd-total" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="ssd-warranty" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="ssd-condition" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">6</td>
                            <td id="cpu-cooler-image" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="cpu-cooler-name" style="padding: 10px; border: 1px solid #ddd;"></td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">Chiếc</td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">1</td>
                            <td id="cpu-cooler-price" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="cpu-cooler-total" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="cpu-cooler-warranty" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="cpu-cooler-condition" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">7</td>
                            <td id="psu-image" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="psu-name" style="padding: 10px; border: 1px solid #ddd;"></td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">Chiếc</td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">1</td>
                            <td id="psu-price" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="psu-total" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="psu-warranty" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="psu-condition" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">8</td>
                            <td id="case-image" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="case-name" style="padding: 10px; border: 1px solid #ddd;"></td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">Chiếc</td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">1</td>
                            <td id="case-price" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="case-total" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="case-warranty" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="case-condition" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">9</td>
                            <td id="hdd-image" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="additional-component-name" style="padding: 10px; border: 1px solid #ddd;"></td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">Chiếc</td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">1</td>
                            <td id="additional-component-price" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="additional-component-total" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="additional-component-warranty" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="additional-component-condition" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">10</td>
                            <td id="monitor-image" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="monitor-name" style="padding: 10px; border: 1px solid #ddd;"></td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">Chiếc</td>
                            <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">1</td>
                            <td id="monitor-price" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="monitor-total" style="padding: 10px 16px; text-align: right; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td id="monitor-warranty" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                            <td id="monitor-condition" style="padding: 10px; text-align: center; border: 1px solid #ddd;"></td>
                        </tr>
                        <tr>
                            <td colspan="5" style="padding: 10px; text-align: right; font-weight: bold; border: 1px solid #ddd;">Tổng cộng</td>
                            <td colspan="2" id="total-price-cell" style="padding: 10px 16px; text-align: right; font-weight: bold; color: #f44336; border: 1px solid #ddd; font-size: 16px; white-space: nowrap;"></td>
                            <td colspan="2" style="padding: 10px; border: 1px solid #ddd;"></td>
                        </tr>
                        <tr>
                            <td colspan="5" style="padding: 10px; text-align: right; font-weight: bold; border: 1px solid #ddd;">Chiết khấu</td>
                            <td colspan="2" style="padding: 10px 16px; text-align: right; font-weight: bold; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td colspan="2" style="padding: 10px; border: 1px solid #ddd;"></td>
                        </tr>
                        <tr>
                            <td colspan="5" style="padding: 10px; text-align: right; font-weight: bold; border: 1px solid #ddd;">Đã thanh toán</td>
                            <td colspan="2" style="padding: 10px 16px; text-align: right; font-weight: bold; border: 1px solid #ddd; white-space: nowrap;"></td>
                            <td colspan="2" style="padding: 10px; border: 1px solid #ddd;"></td>
                        </tr>
                        <tr>
                            <td colspan="5" style="padding: 10px; text-align: right; font-weight: bold; border: 1px solid #ddd;">Còn lại</td>
                            <td colspan="2" id="remaining-price-cell" style="padding: 10px 16px; text-align: right; font-weight: bold; color: #f44336; border: 1px solid #ddd; font-size: 16px; white-space: nowrap;"></td>
                            <td colspan="2" style="padding: 10px; border: 1px solid #ddd;"></td>
                        </tr>
                    </tbody>
                </table>
                <div class="button-group" style="margin-top: 20px; text-align: center;">
                    <button id="capture-config" class="action-button accent-btn" style="display: inline-block; padding: 10px 20px; margin: 0 10px; background-color: #4CAF50; color: white; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">
                        <i class="fas fa-camera"></i> Chụp lại cấu hình
                    </button>
                    <a href="https://zalo.me/0836768597" target="_blank" class="action-button accent-btn" style="display: inline-block; padding: 10px 20px; margin: 0 10px; background-color: #0068ff; color: white; box-shadow: 0 2px 5px rgba(0,0,0,0.2); text-decoration: none; cursor: pointer;">
                        <i class="fas fa-comments"></i> Liên hệ với shop
                    </a>
                </div>
                
                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        const captureButton = document.getElementById('capture-config');
                        if (captureButton) {
                            captureButton.addEventListener('click', function() {
                                const configTable = document.getElementById('config-table');
                                if (!configTable) return;
                                
                                // Thông báo người dùng
                                alert('Đang chuẩn bị chụp ảnh cấu hình...');
                                
                                // Sử dụng html2canvas để chụp ảnh (nếu đã tải)
                                if (typeof html2canvas === 'function') {
                                    html2canvas(configTable).then(function(canvas) {
                                        // Tạo link tải về
                                        const link = document.createElement('a');
                                        link.download = 'cau-hinh-pc-' + new Date().getTime() + '.png';
                                        link.href = canvas.toDataURL('image/png');
                                        link.click();
                                    });
                                } else {
                                    // Tải html2canvas nếu chưa có
                                    const script = document.createElement('script');
                                    script.src = 'https://html2canvas.hertzen.com/dist/html2canvas.min.js';
                                    script.onload = function() {
                                        html2canvas(configTable).then(function(canvas) {
                                            // Tạo link tải về
                                            const link = document.createElement('a');
                                            link.download = 'cau-hinh-pc-' + new Date().getTime() + '.png';
                                            link.href = canvas.toDataURL('image/png');
                                            link.click();
                                        });
                                    };
                                    document.head.appendChild(script);
                                }
                            });
                        }
                    });
                </script>
                <div id="socket-message" class="system-message" style="margin: 15px; padding: 10px; background-color: #e7f3fe; border: 1px solid #b6dcfe; color: #0c5460; border-radius: 5px;"></div>
                <div id="score-message" class="system-message" style="margin: 15px; padding: 10px; background-color: #d4edda; border: 1px solid #c3e6cb; color: #155724; border-radius: 5px;"></div>
                <div id="upgrade-message" class="system-message" style="margin: 15px; padding: 10px; background-color: #fff3cd; border: 1px solid #ffeeba; color: #856404; border-radius: 5px;"></div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-logo">
                    <i class="fas fa-desktop fa-2x"></i>
                    <div class="logo-text">
                        <h3>TRUONG PHAT COMPUTER</h3>
                        <p>Giải pháp tin học chuyên nghiệp</p>
                    </div>
                </div>
                
                <div class="footer-contact">
                    <h4><i class="fas fa-address-card"></i> THÔNG TIN LIÊN HỆ</h4>
                    <div class="contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Địa chỉ: TP Hòa Bình, Tỉnh Hòa Bình, Việt Nam</span>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-phone-alt"></i>
                        <span>Hotline: <a href="tel:0836768597">0836.768.597</a></span>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <span>Email: <a href="mailto:contact@truongphatcomputer.com">contact@truongphatcomputer.com</a></span>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-clock"></i>
                        <span>Giờ làm việc: 8:00 - 20:00 (Tất cả các ngày trong tuần)</span>
                    </div>
                </div>
                
                <div class="footer-social">
                    <h4><i class="fas fa-share-alt"></i> KẾT NỐI VỚI CHÚNG TÔI</h4>
                    <div class="social-icons">
                        <a href="https://www.facebook.com/tpcom.hb" target="_blank" class="social-icon facebook">
                            <i class="fab fa-facebook-f"></i>
                            <span>Facebook</span>
                        </a>
                        <a href="https://zalo.me/0836768597" target="_blank" class="social-icon zalo">
                            <i class="fas fa-comment"></i>
                            <span>Zalo</span>
                        </a>
                        <a href="https://www.tiktok.com/@truongphatcomputer" target="_blank" class="social-icon tiktok">
                            <i class="fab fa-tiktok"></i>
                            <span>TikTok</span>
                        </a>
                        <a href="https://www.youtube.com/@truongphatcomputer" target="_blank" class="social-icon youtube">
                            <i class="fab fa-youtube"></i>
                            <span>YouTube</span>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="footer-map">
                <h4><i class="fas fa-map-marked-alt"></i> BẢN ĐỒ CỬA HÀNG</h4>
                <div class="map-container">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d59680.29954790853!2d105.30341240223767!3d20.81712697193579!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31345b465a4e65fb%3A0xaae6040cfabe8fe!2zVHAuIEjDsmEgQsOsbmgsIEjDsmEgQsOsbmgsIFZp4buHdCBOYW0!5e0!3m2!1svi!2s!4v1719071000000!5m2!1svi!2s" width="100%" height="200" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2024 TRUONG PHAT COMPUTER. Tất cả các quyền được bảo lưu.</p>
            <p>Thiết kế và phát triển bởi <span class="highlight">TRUONG PHAT TEAM</span></p>
        </div>
    </footer>

    <div id="to-top-button" class="to-top-button">
        <i class="fas fa-arrow-up"></i>
    </div>

    <style>
        /* Enhanced Footer Styling */
        footer {
            background: linear-gradient(135deg, #222831 0%, #393e46 100%);
            color: #fff;
            padding: 0;
            margin-top: 40px;
            box-shadow: 0 -5px 15px rgba(0,0,0,0.1);
            font-family: 'Roboto', sans-serif;
        }
        
        .footer-container {
            display: flex;
            flex-wrap: wrap;
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }
        
        .footer-content {
            display: flex;
            flex-wrap: wrap;
            flex: 3;
            gap: 30px;
            border-right: 1px solid rgba(255,255,255,0.1);
            padding-right: 20px;
        }
        
        .footer-logo {
            flex: 1;
            min-width: 250px;
            display: flex;
            align-items: center;
            gap: 15px;
            padding-bottom: 20px;
        }
        
        .footer-logo i {
            color: #0D6EFD;
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(13, 110, 253, 0.3);
        }
        
        .logo-text h3 {
            margin: 0;
            font-size: 1.3rem;
            font-weight: 700;
            color: #0D6EFD;
            text-shadow: 0 0 5px rgba(13, 110, 253, 0.5);
        }
        
        .logo-text p {
            margin: 5px 0 0;
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .footer-contact {
            flex: 1;
            min-width: 250px;
        }
        
        .footer-contact h4, .footer-social h4, .footer-map h4 {
            font-size: 1.1rem;
            margin-bottom: 20px;
            color: #0D6EFD;
            position: relative;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .footer-contact h4 i, .footer-social h4 i, .footer-map h4 i {
            margin-right: 10px;
        }
        
        .contact-item {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .contact-item i {
            color: #0D6EFD;
            width: 20px;
            text-align: center;
        }
        
        .contact-item a {
            color: #fff;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .contact-item a:hover {
            color: #0D6EFD;
            text-decoration: underline;
        }
        
        .footer-social {
            flex: 1;
            min-width: 250px;
        }
        
        .social-icons {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }
        
        .social-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: white;
            text-decoration: none;
            padding: 10px;
            border-radius: 8px;
            width: 80px;
            transition: all 0.3s ease;
            background-color: rgba(255,255,255,0.1);
        }
        
        .social-icon i {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .social-icon span {
            font-size: 0.8rem;
        }
        
        .social-icon.facebook {
            background-color: rgba(66, 103, 178, 0.2);
        }
        
        .social-icon.facebook:hover {
            background-color: #4267B2;
        }
        
        .social-icon.zalo {
            background-color: rgba(13, 92, 182, 0.2);
        }
        
        .social-icon.zalo:hover {
            background-color: #0D5CB6;
        }
        
        .social-icon.tiktok {
            background-color: rgba(0, 0, 0, 0.2);
        }
        
        .social-icon.tiktok:hover {
            background: linear-gradient(45deg, #00f2ea, #ff0050);
        }
        
        .social-icon.youtube {
            background-color: rgba(255, 0, 0, 0.2);
        }
        
        .social-icon.youtube:hover {
            background-color: #FF0000;
        }
        
        .footer-map {
            flex: 1;
            min-width: 300px;
            padding-left: 20px;
        }
        
        .map-container {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .footer-bottom {
            background-color: rgba(0,0,0,0.3);
            text-align: center;
            padding: 15px 0;
            margin-top: 20px;
        }
        
        .footer-bottom p {
            margin: 5px 0;
            font-size: 0.9rem;
            color: rgba(255,255,255,0.7);
        }
        
        .highlight {
            color: #0D6EFD;
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            .footer-container {
                flex-direction: column;
            }
            
            .footer-content {
                flex-direction: column;
                border-right: none;
                padding-right: 0;
                border-bottom: 1px solid rgba(255,255,255,0.1);
                padding-bottom: 20px;
            }
            
            .footer-map {
                padding-left: 0;
                margin-top: 20px;
            }
        }
    </style>

    <!-- Script for the interactive PC builder -->
    <script src="./components-data.js"></script>
    <!-- CPU cooler data is now loaded directly from js/data/ -->
    <!-- <script src="./cpu-cooler-data.js"></script> -->
    <script src="./buildsan.js" type="module"></script>
    <script src="./buildsan-globals.js"></script>
    <!-- Script for Excel export functionality -->
    <script src="./auto-export-config.js"></script>
    <!-- Script for enhanced auto-config functionality -->
    <script src="./auto-config-helper.js"></script>
    
    <!-- Tải trình tải dữ liệu linh kiện -->
    <script src="./import-loader.js" type="module"></script>
    
    <script>
        // Load required libraries
        function loadRequiredLibraries() {
            return new Promise((resolve, reject) => {
                // Load Popper.js
                if (typeof window.Popper === 'undefined') {
                    const popperScript = document.createElement('script');
                    popperScript.src = 'https://unpkg.com/@popperjs/core@2.11.8/dist/umd/popper.min.js';
                    popperScript.onload = () => {
                        console.log('Popper.js loaded successfully');
                        resolve();
                    };
                    popperScript.onerror = () => reject(new Error('Failed to load Popper.js'));
                    document.head.appendChild(popperScript);
                } else {
                    resolve();
                }
            });
        }

        // Create image placeholder folders in memory
        function createImagePlaceholders() {
            // This function creates placeholders for image directories
            // to prevent 404 errors when images can't be found
            
            // Create a dynamic placeholder image with a label
            function createPlaceholderSrc(label) {
                const canvas = document.createElement('canvas');
                canvas.width = 120;
                canvas.height = 80;
                const ctx = canvas.getContext('2d');
                
                // Fill background
                ctx.fillStyle = '#f0f0f0';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Add border
                ctx.strokeStyle = '#ccc';
                ctx.lineWidth = 2;
                ctx.strokeRect(2, 2, canvas.width-4, canvas.height-4);
                
                // Add text
                ctx.fillStyle = '#666';
                ctx.font = '14px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(label, canvas.width/2, canvas.height/2);
                
                return canvas.toDataURL('image/png');
            }
            
            // Create placeholders for each component type
            window.placeholderImages = {
                'cpu': createPlaceholderSrc('CPU'),
                'mainboard': createPlaceholderSrc('Mainboard'),
                'ram': createPlaceholderSrc('RAM'),
                'vga': createPlaceholderSrc('VGA'),
                'ssd': createPlaceholderSrc('SSD'),
                'psu': createPlaceholderSrc('PSU'),
                'case': createPlaceholderSrc('Case'),
                'cpucooler': createPlaceholderSrc('CPU Cooler'),
                'coolers': createPlaceholderSrc('CPU Cooler'),
                'cpu-cooler': createPlaceholderSrc('CPU Cooler'),
                'hdd': createPlaceholderSrc('HDD'),
                'monitor': createPlaceholderSrc('Monitor'),
                'placeholder': createPlaceholderSrc('No Image')
            };
            
            // Make the placeholders globally available
            window.getPlaceholder = function(type) {
                return window.placeholderImages[type] || window.placeholderImages['placeholder'];
            };
            
            console.log('Image placeholders created successfully');
        }

        // Hàm populateDropdowns
        function populateDropdowns() {
            console.log('Initializing dropdowns...');
            try {
                // Lấy các dropdown
                const componentDropdowns = {
                    'cpu': document.getElementById('cpu'),
                    'mainboard': document.getElementById('mainboard'),
                    'vga': document.getElementById('vga'),
                    'ram': document.getElementById('ram'),
                    'ssd': document.getElementById('ssd'),
                    'psu': document.getElementById('psu'),
                    'case': document.getElementById('case'),
                    'cpuCooler': document.getElementById('cpuCooler'),
                    'hdd': document.getElementById('hdd'),
                    'monitor': document.getElementById('monitor')
                };
                
                // Lấy dữ liệu từ window object
                const componentsData = {
                    'cpu': window.cpuData || {},
                    'mainboard': window.mainboardData || {},
                    'vga': window.vgaData || {},
                    'ram': window.ramData || {},
                    'ssd': window.ssdData || {},
                    'psu': window.psuData || {},
                    'case': window.caseData || {},
                    'cpuCooler': window.cpuCoolerData || {},
                    'hdd': window.hddData || {},
                    'monitor': window.monitorData || {}
                };
                
                // Thêm options cho mỗi dropdown từ dữ liệu tương ứng
                Object.keys(componentDropdowns).forEach(componentType => {
                    const dropdown = componentDropdowns[componentType];
                    const data = componentsData[componentType];
                    
                    if (dropdown && data && Object.keys(data).length > 0 && dropdown.options.length <= 1) {
                        // Xóa tất cả options hiện tại trừ option đầu tiên (thường là placeholder)
                        const placeholderOption = dropdown.options[0];
                        dropdown.innerHTML = '';
                        if (placeholderOption) {
                            dropdown.appendChild(placeholderOption);
                        }
                        
                        // Thêm options mới từ dữ liệu
                        Object.keys(data).forEach(key => {
                            const component = data[key];
                            const option = document.createElement('option');
                            option.value = key;
                            option.text = `${component.name} - ${formatPrice(component.price)} VNĐ`;
                            option.dataset.price = component.price;
                            option.dataset.image = component.image;
                            dropdown.appendChild(option);
                        });
                        
                        console.log(`Added ${Object.keys(data).length} options to ${componentType} dropdown`);
                    }
                });
                
                console.log('Dropdowns populated successfully');
            } catch (error) {
                console.error('Error in populateDropdowns:', error);
            }
        }
        
        // Helper function to format price
        function formatPrice(price) {
            return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
        
        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                await loadRequiredLibraries();
                
                // Create image placeholders
                createImagePlaceholders();
                
                // Lắng nghe sự kiện dữ liệu đã được tải
                document.addEventListener('component-data-loaded', () => {
                    console.log('Nhận được sự kiện component-data-loaded, đang điền dữ liệu vào dropdowns');
                    populateDropdowns();
                });
                
                // REMOVED: Don't hide the config table initially
                
                // Configuration modal event handlers removed
                const calculateButton = document.getElementById('calculate-button');
                if (calculateButton) {
                    calculateButton.addEventListener('click', function() {
                        console.log('Calculate button clicked - updating configuration');
                        // Only update the configuration table, no modal display
                        if (typeof window.updateComponentTable === 'function') {
                            window.updateComponentTable();
                        }
                    });
                }
                
                // Update the show-config-details button to just scroll to the config table
                const showConfigDetailsButton = document.getElementById('show-config-details');
                if (showConfigDetailsButton) {
                    showConfigDetailsButton.addEventListener('click', function() {
                        console.log('Show details button clicked - scrolling to configuration table');
                        const configTable = document.getElementById('config-table');
                        if (configTable) {
                            configTable.scrollIntoView({ behavior: 'smooth' });
                        }
                    });
                }
                
                // Nếu sau 5 giây vẫn chưa nhận được sự kiện, thử kiểm tra dữ liệu trực tiếp
                setTimeout(() => {
                    if (window.cpuData && !document.getElementById('cpu').options.length > 1) {
                        console.log('Đã tải dữ liệu nhưng không nhận được sự kiện, điền dữ liệu vào dropdowns');
                        populateDropdowns();
                    }
                }, 5000);
                
            } catch (error) {
                console.error('Error during initialization:', error);
            }
        });
        
        // Đảm bảo updateConfigTableImages có thể truy cập toàn cục
        window.formatPrice = formatPrice;
    </script>

    <!-- Thêm script kết nối các component -->
    <script src="component-connector.js"></script>

    <!-- Event handlers script -->
    <script src="event-handlers.js"></script>

    <!-- Modern UI enhancements -->
    <script src="modern-ui.js"></script>

    <script>
    // Fix layout styling when the page loads
    document.addEventListener('DOMContentLoaded', function() {
        // Ensure proper styling for navigation items
        const navItems = document.querySelectorAll('.nav-item, .step-item');
        if (navItems.length > 0) {
            navItems.forEach(item => {
                item.classList.add('fixed-layout');
            });
        }
        
        // Fix CPU selection items
        const cpuOptions = document.querySelectorAll('#intel-option, #amd-option');
        if (cpuOptions.length > 0) {
            cpuOptions.forEach(option => {
                option.classList.add('cpu-option');
            });
        }
        
        // Fix game cards
        const gameCards = document.querySelectorAll('.game-card');
        if (gameCards.length > 0) {
            gameCards.forEach(card => {
                card.classList.add('fixed-game-card');
            });
        }
        
        // Add wrapper for contact buttons if needed
        const contactButtons = document.querySelectorAll('a[href*="zalo"], a[href*="tel:"], a[href*="facebook"]');
        if (contactButtons.length > 0 && !document.querySelector('.contact-buttons')) {
            const firstButton = contactButtons[0];
            const parent = firstButton.parentNode;
            
            if (!parent.classList.contains('contact-buttons')) {
                const wrapper = document.createElement('div');
                wrapper.className = 'contact-buttons';
                
                contactButtons.forEach(button => {
                    wrapper.appendChild(button.cloneNode(true));
                });
                
                // Replace buttons with the wrapped version
                contactButtons.forEach(button => button.remove());
                parent.appendChild(wrapper);
            }
        }
        
        // Apply section styling to major containers
        const sections = document.querySelectorAll('.selection-section, .component-section, .budget-section');
        sections.forEach(section => {
            if (!section.classList.contains('styled-section')) {
                section.classList.add('styled-section');
            }
        });
        
        // Fix the header background
        const header = document.querySelector('header');
        if (header) {
            header.style.background = 'linear-gradient(135deg, #0053b4, #0275d8)';
        }
        
        // Add dark mode toggle if not present
        if (!document.querySelector('.dark-mode-toggle')) {
            const header = document.querySelector('header');
            if (header) {
                const toggle = document.createElement('div');
                toggle.className = 'dark-mode-toggle';
                toggle.innerHTML = '<i class="fas fa-moon"></i>';
                toggle.addEventListener('click', function() {
                    document.body.classList.toggle('dark-mode');
                    this.innerHTML = document.body.classList.contains('dark-mode') 
                        ? '<i class="fas fa-sun"></i>' 
                        : '<i class="fas fa-moon"></i>';
                });
                header.appendChild(toggle);
            }
        }
        
        // Make sure config table is visible
        const configTable = document.getElementById('config-table');
        if (configTable) {
            configTable.style.display = 'block';
            console.log('Config table display set to block on page load');
        }
        
        // Initialize buttons for showing modal
        const calculateButton = document.getElementById('calculate-button');
        const showConfigDetailsButton = document.getElementById('show-config-details');
        const summaryModal = document.getElementById('summary-modal');
        const closeModalBtn = document.querySelector('.close-modal');
        
        if (calculateButton && typeof window.calculateTotalPriceAndSummary === 'function') {
            calculateButton.addEventListener('click', function() {
                window.calculateTotalPriceAndSummary();
            });
        }
        
        if (showConfigDetailsButton && typeof window.calculateTotalPriceAndSummary === 'function') {
            showConfigDetailsButton.addEventListener('click', function() {
                window.calculateTotalPriceAndSummary();
            });
        }
        
        if (closeModalBtn && summaryModal) {
            closeModalBtn.addEventListener('click', function() {
                summaryModal.style.display = 'none';
                console.log('Closing modal via close button');
            });
            
            // Also close when clicking outside
            window.onclick = function(event) {
                if (event.target == summaryModal) {
                    summaryModal.style.display = 'none';
                    console.log('Closing modal via outside click');
                }
            };
        }
    });
    </script>

    <script src="./service-worker.js"></script>
    <script src="./component-compatibility.js"></script>
    <script src="./component-compatibility-bridge.js"></script>
    <script src="./component-compatibility-fix.js"></script>
    <script src="./config-table-handler.js"></script>

    <!-- Script to handle the show all config tables button -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Run diagnostic check for CPU cooler cells
            console.log('Diagnostic check for CPU cooler cells:');
            console.log('cpu-cooler-image exists:', !!document.getElementById('cpu-cooler-image'));
            console.log('cpu-cooler-name exists:', !!document.getElementById('cpu-cooler-name'));
            console.log('cpu-cooler-price exists:', !!document.getElementById('cpu-cooler-price'));
            console.log('cpu-cooler-total exists:', !!document.getElementById('cpu-cooler-total'));
            
            // Check alternative element IDs
            console.log('Alternative element check:');
            console.log('cpucooler-image exists:', !!document.getElementById('cpucooler-image'));
            console.log('cpuCooler-image exists:', !!document.getElementById('cpuCooler-image'));
            
            // Handle the update configuration button click - Fix the invalid selector
            const updateButtons = document.querySelectorAll('button');
            let updateConfigButton = null;
            
            // Find the update button by its text content
            updateButtons.forEach(button => {
                if (button.textContent.includes('Cập Nhật') || 
                    button.id.includes('nhật') || 
                    button.id.includes('cập-nhật')) {
                    updateConfigButton = button;
                }
            });
            
            if (updateConfigButton) {
                console.log('Found update button:', updateConfigButton.textContent.trim());
                updateConfigButton.addEventListener('click', function() {
                    console.log('Update config button clicked');
                    
                    // Force direct update of CPU cooler in config table
                    const cpuCoolerDropdown = document.getElementById('cpuCooler');
                    if (cpuCoolerDropdown && cpuCoolerDropdown.value) {
                        const coolerKey = cpuCoolerDropdown.value;
                        
                        if (window.cpuCoolerData && window.cpuCoolerData[coolerKey]) {
                            const cooler = window.cpuCoolerData[coolerKey];
                            
                            // Debug output
                            console.log('Manually updating CPU cooler in table:', cooler.name);
                            
                            // Find all possible element IDs
                            const possibleImageIds = ['cpu-cooler-image', 'cpucooler-image', 'cpuCooler-image'];
                            const possibleNameIds = ['cpu-cooler-name', 'cpucooler-name', 'cpuCooler-name'];
                            const possiblePriceIds = ['cpu-cooler-price', 'cpucooler-price', 'cpuCooler-price'];
                            const possibleTotalIds = ['cpu-cooler-total', 'cpucooler-total', 'cpuCooler-total'];
                            
                            // Find existing elements
                            let imageCell = null;
                            for (const id of possibleImageIds) {
                                const el = document.getElementById(id);
                                if (el) {
                                    imageCell = el;
                                    console.log('Found image cell with ID:', id);
                                    break;
                                }
                            }
                            
                            let nameCell = null;
                            for (const id of possibleNameIds) {
                                const el = document.getElementById(id);
                                if (el) {
                                    nameCell = el;
                                    console.log('Found name cell with ID:', id);
                                    break;
                                }
                            }
                            
                            let priceCell = null;
                            for (const id of possiblePriceIds) {
                                const el = document.getElementById(id);
                                if (el) {
                                    priceCell = el;
                                    console.log('Found price cell with ID:', id);
                                    break;
                                }
                            }
                            
                            let totalCell = null;
                            for (const id of possibleTotalIds) {
                                const el = document.getElementById(id);
                                if (el) {
                                    totalCell = el;
                                    console.log('Found total cell with ID:', id);
                                    break;
                                }
                            }
                            
                            // Update cells if found
                            if (imageCell) {
                                const img = document.createElement('img');
                                img.src = cooler.image || `images/coolers/${coolerKey}.jpg`;
                                img.alt = cooler.name;
                                img.style.maxWidth = '100px';
                                img.style.maxHeight = '60px';
                                
                                // Add error handler
                                img.onerror = function() {
                                    this.src = 'images/coolers/cr-1000.jpg';
                                    
                                    // Final fallback
                                    this.onerror = function() {
                                        if (window.getPlaceholder) {
                                            this.src = window.getPlaceholder('cpucooler');
                                        } else {
                                            console.warn('Failed to load CPU cooler image');
                                            this.style.display = 'none';
                                        }
                                    };
                                };
                                
                                imageCell.innerHTML = '';
                                imageCell.appendChild(img);
                            }
                            
                            if (nameCell) nameCell.textContent = cooler.name;
                            
                            const formatPrice = function(price) {
                                return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                            };
                            
                            if (priceCell) priceCell.textContent = formatPrice(cooler.price) + ' VND';
                            if (totalCell) totalCell.textContent = formatPrice(cooler.price) + ' VND';
                        }
                    }
                });
            } else {
                console.warn('Update config button not found');
                
                // Try to find any buttons and log them
                const allButtons = document.querySelectorAll('button');
                console.log('Found', allButtons.length, 'buttons on the page:');
                allButtons.forEach((btn, index) => {
                    console.log(`Button ${index}:`, btn.id || '(no id)', btn.textContent.trim());
                });
            }
            
            // Initialize buttons for showing modal
            const calculateButton = document.getElementById('calculate-button');
            const showConfigDetailsButton = document.getElementById('show-config-details');
            const summaryModal = document.getElementById('summary-modal');
            const closeModalBtn = document.querySelector('.close-modal');
            
            if (calculateButton && typeof window.calculateTotalPriceAndSummary === 'function') {
                calculateButton.addEventListener('click', function() {
                    window.calculateTotalPriceAndSummary();
                });
            }
            
            if (showConfigDetailsButton && typeof window.calculateTotalPriceAndSummary === 'function') {
                showConfigDetailsButton.addEventListener('click', function() {
                    window.calculateTotalPriceAndSummary();
                });
            }
            
            if (closeModalBtn && summaryModal) {
                closeModalBtn.addEventListener('click', function() {
                    summaryModal.style.display = 'none';
                    console.log('Closing modal via close button');
                });
                
                // Also close when clicking outside
                window.onclick = function(event) {
                    if (event.target == summaryModal) {
                        summaryModal.style.display = 'none';
                        console.log('Closing modal via outside click');
                    }
                };
            }
        });
    </script>

    <!-- Emergency config table fix - add near the top of the body -->
    <script>
    // IMMEDIATELY force config table visible
    (function() {
        // Direct DOM manipulation for config table
        function forceConfigTableVisible() {
            // Target the specific table with ID config-table
            const configTable = document.querySelector('#config-table, .config-table');
            if (configTable) {
                // Force display with aggressive !important style
                configTable.setAttribute('style', 'display: table !important; visibility: visible !important; opacity: 1 !important;');
                
                // Also add a class that we can target with CSS
                configTable.classList.add('force-visible');
                
                // Make all parent elements visible
                let parent = configTable.parentElement;
                while (parent) {
                    parent.setAttribute('style', 'display: block !important; visibility: visible !important; opacity: 1 !important;');
                    parent = parent.parentElement;
                }
                
                console.log('EMERGENCY: Forced config table visible');
            }
        }

        // Run immediately
        forceConfigTableVisible();
        
        // Also run after a small delay
        setTimeout(forceConfigTableVisible, 100);
        setTimeout(forceConfigTableVisible, 500);
        setTimeout(forceConfigTableVisible, 1000);
        
        // Also run continuously every 500ms
        setInterval(forceConfigTableVisible, 500);
        
        // Add a direct CSS rule
        const style = document.createElement('style');
        style.innerHTML = `
            #config-table, .config-table, .force-visible, 
            table[id="config-table"], table[class*="config-table"],
            div > table, .container > table {
                display: table !important;
                visibility: visible !important;
                opacity: 1 !important;
                border-collapse: collapse !important;
                width: 100% !important;
            }
        `;
        document.head.appendChild(style);
        
        // Also try direct element replacement
        document.addEventListener('DOMContentLoaded', function() {
            // Try to find the hidden table
            const hiddenTable = document.querySelector('#config-table, .config-table');
            if (hiddenTable && window.getComputedStyle(hiddenTable).display === 'none') {
                // Create a clone with forced visibility
                const clone = hiddenTable.cloneNode(true);
                clone.style.cssText = 'display: table !important; visibility: visible !important; opacity: 1 !important;';
                
                // Replace the original
                if (hiddenTable.parentNode) {
                    hiddenTable.parentNode.replaceChild(clone, hiddenTable);
                    console.log('EMERGENCY: Replaced hidden table with visible clone');
                }
            }
        });
    })();
    </script>



    <!-- Script to automatically show modals on page load -->
    <script>
    // Force display of component-detail-modal
    window.addEventListener('load', function() {
        // First try the regular ways
        if (typeof window.showConfigDetailModal === 'function') {
            console.log('Calling showConfigDetailModal automatically');
            window.showConfigDetailModal();
        }
        
        // Then force direct visibility for modal
        setTimeout(function() {
            const modal = document.getElementById('component-detail-modal');
            if (modal) {
                console.log('Forcing component-detail-modal visible');
                modal.style.cssText = 'display: block !important; visibility: visible !important; opacity: 1 !important;';
                modal.classList.add('show');
                modal.classList.add('in');
                
                // Make backdrop visible too
                const backdrop = document.querySelector('.modal-backdrop');
                if (!backdrop) {
                    // Create a backdrop if it doesn't exist
                    const newBackdrop = document.createElement('div');
                    newBackdrop.className = 'modal-backdrop fade in';
                    newBackdrop.style.cssText = 'display: block !important; opacity: 0.5 !important;';
                    document.body.appendChild(newBackdrop);
                }
                
                // Show all tables inside the modal
                const tables = modal.querySelectorAll('table');
                tables.forEach(function(table) {
                    table.style.cssText = 'display: table !important; visibility: visible !important; opacity: 1 !important;';
                });
            }
        }, 1500); // Wait for 1.5 seconds after load
        
        // Also try to make the summary modal visible
        setTimeout(function() {
            const summaryModal = document.getElementById('summary-modal');
            if (summaryModal) {
                console.log('Forcing summary-modal visible');
                summaryModal.style.cssText = 'display: block !important; visibility: visible !important; opacity: 1 !important;';
            }
        }, 2000); // Wait for 2 seconds after load
    });
    </script>

    <!-- Modal close functionality -->
    <script>
    // Ensure modal close buttons work properly
    document.addEventListener('DOMContentLoaded', function() {
        // Get all close buttons in modals
        const closeButtons = document.querySelectorAll('.modal .close, [data-dismiss="modal"]');
        
        closeButtons.forEach(function(button) {
            button.addEventListener('click', function() {
                // Find the parent modal
                let modal = this.closest('.modal');
                if (modal) {
                    // Hide the modal
                    modal.style.display = 'none';
                    
                    // Remove modal backdrop if it exists
                    const backdrop = document.querySelector('.modal-backdrop');
                    if (backdrop) {
                        backdrop.parentNode.removeChild(backdrop);
                    }
                    
                    console.log('Modal closed via close button');
                }
            });
        });
        
        // Also allow clicking outside the modal to close it
        window.addEventListener('click', function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(function(modal) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                    
                    // Remove modal backdrop
                    const backdrop = document.querySelector('.modal-backdrop');
                    if (backdrop) {
                        backdrop.parentNode.removeChild(backdrop);
                    }
                    
                    console.log('Modal closed via outside click');
                }
            });
        });
    });
    </script>

    <script>
        // Create an event handler for CPU cooler dropdown changes
        document.addEventListener('DOMContentLoaded', function() {
            // Handle CPU cooler dropdown change
            const cpuCoolerDropdown = document.getElementById('cpuCooler');
            if (cpuCoolerDropdown) {
                cpuCoolerDropdown.addEventListener('change', function() {
                    console.log('CPU cooler selection changed:', this.value);
                    
                    // Get the selected cooler key
                    const coolerKey = this.value;
                    
                    // Find cooler data
                    if (coolerKey && window.cpuCoolerData && window.cpuCoolerData[coolerKey]) {
                        const cooler = window.cpuCoolerData[coolerKey];
                        
                        // Update the CPU cooler in the configuration table
                        const imageCell = document.getElementById('cpu-cooler-image');
                        const nameCell = document.getElementById('cpu-cooler-name');
                        const priceCell = document.getElementById('cpu-cooler-price');
                        const totalCell = document.getElementById('cpu-cooler-total');
                        
                        if (imageCell) {
                            const img = document.createElement('img');
                            img.src = cooler.image || `images/coolers/${coolerKey}.jpg`;
                            img.alt = cooler.name;
                            img.style.maxWidth = '100px';
                            img.style.maxHeight = '60px';
                            img.onerror = function() {
                                this.src = 'images/coolers/cr-1000.jpg';
                            };
                            
                            imageCell.innerHTML = '';
                            imageCell.appendChild(img);
                        }
                        
                        if (nameCell) nameCell.textContent = cooler.name;
                        
                        const formatPrice = function(price) {
                            return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                        };
                        
                        if (priceCell) priceCell.textContent = formatPrice(cooler.price) + ' VND';
                        if (totalCell) totalCell.textContent = formatPrice(cooler.price) + ' VND';
                        
                        // Make sure the configuration table is visible
                        const configTable = document.getElementById('config-table');
                        if (configTable) {
                            configTable.style.display = 'block';
                            configTable.style.visibility = 'visible';
                        }
                        
                        console.log('CPU cooler updated in configuration table');
                    }
                });
            }
        });
    </script>

    <!-- Update CPU Cooler button (hidden by default) -->
    <!-- Button removed as requested -->
    
    <script>
        // Button to force CPU cooler update - disabled
        document.addEventListener('DOMContentLoaded', function() {
            // Button functionality removed as requested
        });
    </script>

    <!-- Script to load component data from js/data directory -->
    <script>
        // Load component data from js/data directory
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Loading component data from js/data directory...');
            
            // List of components to load
            const components = [
                'cpu',
                'mainboard',
                'vga',
                'ram',
                'ssd',
                'psu',
                'case',
                'cpuCooler',
                'hdd',
                'monitor'
            ];
            
            // Load each component's data
            components.forEach(component => {
                fetch(`js/data/${component}.js`)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`Failed to fetch ${component} data: ${response.status}`);
                        }
                        return response.text();
                    })
                    .then(data => {
                        try {
                            // Extract the data object from the module
                            const dataText = data.replace(`export const ${component}Data =`, `window.${component}Data =`);
                            
                            // Create a script element to evaluate the code
                            const script = document.createElement('script');
                            script.textContent = dataText;
                            document.head.appendChild(script);
                            
                            if (window[`${component}Data`]) {
                                console.log(`✅ ${component} data loaded from js/data/${component}.js:`, 
                                    Object.keys(window[`${component}Data`]).length, 'items');
                            } else {
                                console.warn(`⚠️ ${component} data not properly loaded`);
                            }
                        } catch (error) {
                            console.error(`Error processing ${component} data:`, error);
                        }
                    })
                    .catch(error => {
                        console.warn(`Error loading ${component} data:`, error);
                    });
            });
        });
    </script>

    <!-- Script to update real-time date and time display in Vietnam timezone (GMT+7) -->
    <script>
        function updateDateTime() {
            const now = new Date();
            
            // Convert to Vietnam timezone (GMT+7)
            const vietnamTime = new Date(now.getTime() + (7 * 60 * 60 * 1000 + now.getTimezoneOffset() * 60 * 1000));
            
            // Format the date and time
            const options = { 
                weekday: 'long',
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit',
                hour12: false,
                timeZone: 'Asia/Ho_Chi_Minh'
            };
            
            try {
                const formattedDateTime = vietnamTime.toLocaleString('vi-VN', options);
                document.getElementById('datetime-value').textContent = formattedDateTime;
            } catch (error) {
                // Fallback if Intl is not supported
                const pad = num => String(num).padStart(2, '0');
                const days = ['Chủ Nhật', 'Thứ Hai', 'Thứ Ba', 'Thứ Tư', 'Thứ Năm', 'Thứ Sáu', 'Thứ Bảy'];
                const months = ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6', 
                                'Tháng 7', 'Tháng 8', 'Tháng 9', 'Tháng 10', 'Tháng 11', 'Tháng 12'];
                
                const day = days[vietnamTime.getDay()];
                const date = vietnamTime.getDate();
                const month = months[vietnamTime.getMonth()];
                const year = vietnamTime.getFullYear();
                const hours = pad(vietnamTime.getHours());
                const minutes = pad(vietnamTime.getMinutes());
                const seconds = pad(vietnamTime.getSeconds());
                
                const fallbackFormat = `${day}, ${date} ${month} ${year}, ${hours}:${minutes}:${seconds}`;
                document.getElementById('datetime-value').textContent = fallbackFormat;
            }
        }
        
        // Update the date and time immediately and then every second
        document.addEventListener('DOMContentLoaded', function() {
            updateDateTime(); // Initial update
            setInterval(updateDateTime, 1000); // Update every second
        });
    </script>
</body>

</html>

<!-- At the end of the body tag, add this debug helper -->
<div id="debug-helper" style="position: fixed; bottom: 0; right: 0; background: rgba(0,0,0,0.7); color: white; padding: 10px; font-size: 12px; z-index: 9999; max-width: 400px; max-height: 300px; overflow: auto; display: none;">
    <div>
        Debug Status: 
        <button id="refresh-debug" style="background: #4CAF50; color: white; border: none; padding: 2px 5px; margin-left: 10px; cursor: pointer;">Refresh</button>
        <button id="close-debug" style="background: #f44336; color: white; border: none; padding: 2px 5px; margin-left: 5px; cursor: pointer;">Close</button>
    </div>
    <div id="debug-status"></div>
</div>

<script>
// Debug helper to check if tables are visible
function debugHelper() {
    const debugStatus = document.getElementById('debug-status');
    if (!debugStatus) return;
    
    const tables = document.querySelectorAll('table, #component-table, #configuration-table, .config-table');
    const calculateButtons = document.querySelectorAll('#calculate-btn, .calculate-btn, button[onclick*="showConfig"]');
    
    let status = '';
    
    // Check tables
    status += `<strong>Tables (${tables.length}):</strong><br>`;
    tables.forEach((table, index) => {
        if (index < 10) { // Show more tables to aid debugging
            const display = window.getComputedStyle(table).display;
            const visibility = window.getComputedStyle(table).visibility;
            const id = table.id || 'no-id';
            const className = table.className || 'no-class';
            status += `Table ${index}: ID=${id}, Class=${className}<br>`;
            status += `- display=${display}, visibility=${visibility}<br>`;
            if (display === 'none') {
                // If table is hidden, show parent chain to help debug
                let parent = table.parentElement;
                let parentChain = '';
                for (let i = 0; i < 3 && parent; i++) {
                    const parentDisplay = window.getComputedStyle(parent).display;
                    const parentId = parent.id || 'no-id';
                    const parentClass = parent.className || 'no-class';
                    parentChain += `Parent[${i}]: ID=${parentId}, Class=${parentClass}, display=${parentDisplay}<br>`;
                    parent = parent.parentElement;
                }
                status += `<span style="color: #ff5252;">${parentChain}</span>`;
            }
        }
    });
    
    // Check buttons
    status += `<br><strong>Buttons (${calculateButtons.length}):</strong><br>`;
    calculateButtons.forEach((button, index) => {
        if (index < 5) { // Show more buttons
            const id = button.id || 'no-id';
            const className = button.className || 'no-class';
            status += `Button ${index}: ID=${id}, Class=${className}, Text="${button.textContent || button.innerText || 'No text'}"<br>`;
        }
    });
    
    // Show function availability
    status += '<br><strong>Functions:</strong><br>';
    [
        'updateComponentTable',
        'showConfigDetailModal',
        'forceShowComponentTable',
        'fixConfigTableDisplay',
        'forceShowConfigTables',
        'calculateTotalPriceAndSummary'
    ].forEach(funcName => {
        const exists = typeof window[funcName] === 'function';
        status += `${funcName}: ${exists ? 'Available' : 'Not found'}<br>`;
    });
    
    // Get more detailed structure
    status += '<br><strong>Page Structure:</strong><br>';
    const configSections = document.querySelectorAll('.config-section, .component-selection, .component-selection-container');
    status += `Found ${configSections.length} configuration sections<br>`;
    
    // Check for modal visibility
    const modals = document.querySelectorAll('.modal, #configuration-detail-modal, .modal-content');
    status += `<br><strong>Modals (${modals.length}):</strong><br>`;
    modals.forEach((modal, index) => {
        if (index < 3) {
            const display = window.getComputedStyle(modal).display;
            const id = modal.id || 'no-id';
            const className = modal.className || 'no-class';
            status += `Modal ${index}: ID=${id}, Class=${className}, display=${display}<br>`;
        }
    });
    
    debugStatus.innerHTML = status;
}

// Run debug helper every 5 seconds (less frequent to reduce performance impact)
let debugInterval = setInterval(debugHelper, 5000);
debugHelper(); // Run immediately

// Add event to show/hide debug panel
document.getElementById('debug-helper').addEventListener('dblclick', function() {
    const debugStatus = document.getElementById('debug-status');
    debugStatus.style.display = debugStatus.style.display === 'none' ? 'block' : 'none';
});

// Add close button functionality
document.getElementById('close-debug').addEventListener('click', function() {
    const debugHelper = document.getElementById('debug-helper');
    if (debugHelper) {
        debugHelper.style.display = 'none';
    }
});

// Add refresh button functionality
document.getElementById('refresh-debug').addEventListener('click', function() {
    clearInterval(debugInterval);
    debugHelper(); // Run immediately
    debugInterval = setInterval(debugHelper, 5000); // Reset interval
});
</script>

<!-- Direct table display fix script - add at the very end -->
<script>
(function() {
    // Get all hidden elements and force them to be visible
    function forceElementsVisible() {
        // Find all elements with display:none style attribute
        document.querySelectorAll('[style*="display: none"], [style*="display:none"]').forEach(function(element) {
            // Check if it's a table or container we want to show (but NOT modals)
            if ((element.tagName === 'TABLE' || 
                element.id === 'component-table' || 
                element.id === 'configuration-table' ||
                element.id === 'config-table' ||
                element.className.includes('config-table') ||
                element.className.includes('table-responsive')) &&
                !element.className.includes('modal') && 
                !element.id.includes('modal')) {
                
                // Force display with inline style
                element.style.cssText = element.style.cssText.replace(/display\s*:\s*none/gi, 'display: table');
                element.style.display = 'table';
                element.style.visibility = 'visible';
                element.style.opacity = '1';
                
                console.log('Forced element visible:', element.tagName, element.id || element.className);
            }
            
            // Check if it's a container (but NOT a modal)
            if ((element.className.includes('container') || 
                element.className.includes('section') || 
                element.className.includes('table-container')) &&
                !element.className.includes('modal') && 
                !element.id.includes('modal')) {
                
                // Force display with inline style
                element.style.cssText = element.style.cssText.replace(/display\s*:\s*none/gi, 'display: block');
                element.style.display = 'block';
                element.style.visibility = 'visible';
                element.style.opacity = '1';
                
                console.log('Forced container visible:', element.tagName, element.id || element.className);
            }
        });
        
        // Make sure modals have proper close buttons
        document.querySelectorAll('.modal').forEach(function(modal) {
            // Don't force modals to be visible
            // Instead, make sure they have close buttons
            if (!modal.querySelector('.close-modal')) {
                const closeButton = document.createElement('button');
                closeButton.className = 'close-modal';
                closeButton.innerHTML = '&times;';
                closeButton.style.cssText = 'position: absolute; right: 10px; top: 10px; background: none; border: none; font-size: 24px; cursor: pointer;';
                
                closeButton.addEventListener('click', function() {
                    modal.style.display = 'none';
                });
                
                // Add to modal if it has a header, or to the modal itself
                const header = modal.querySelector('.modal-header');
                if (header) {
                    header.appendChild(closeButton);
                } else {
                    modal.appendChild(closeButton);
                }
            }
        });
    }

    // Run after DOM is loaded, but not automatically - wait for user action
    document.addEventListener('DOMContentLoaded', function() {
        // Add a MutationObserver to handle any dynamically added config tables
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.addedNodes && mutation.addedNodes.length > 0) {
                    // Check if any of the added nodes are tables
                    for (let i = 0; i < mutation.addedNodes.length; i++) {
                        const node = mutation.addedNodes[i];
                        if (node.tagName === 'TABLE' || 
                            (node.id && (node.id === 'config-table' || node.id === 'component-table')) ||
                            (node.className && node.className.includes('config-table'))) {
                            
                            // Make only this specific table visible
                            node.style.display = 'table';
                            node.style.visibility = 'visible';
                            node.style.opacity = '1';
                        }
                    }
                }
            });
        });
        
        // Start observing for table changes only
        observer.observe(document.body, { 
            childList: true, 
            subtree: true,
            attributes: true,
            attributeFilter: ['style', 'class']
        });
    });
})();
</script>

<!-- Add modal closing script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add close buttons to all modals
    function addCloseButtonsToModals() {
        document.querySelectorAll('.modal, #summary-modal, #component-detail-modal').forEach(function(modal) {
            // Add close button if it doesn't exist
            if (!modal.querySelector('.close') && !modal.querySelector('.close-modal')) {
                // Create close button
                const closeButton = document.createElement('button');
                closeButton.className = 'close-modal';
                closeButton.innerHTML = '&times;';
                closeButton.style.cssText = 'position: absolute; right: 15px; top: 15px; background: none; border: none; font-size: 28px; cursor: pointer; color: #000; z-index: 9999;';
                
                // Add click handler
                closeButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    modal.style.display = 'none';
                    
                    // Remove modal backdrop if it exists
                    const backdrop = document.querySelector('.modal-backdrop');
                    if (backdrop) {
                        backdrop.parentNode.removeChild(backdrop);
                    }
                    
                    // Remove modal-open class from body
                    document.body.classList.remove('modal-open');
                    document.body.style.overflow = '';
                    document.body.style.paddingRight = '';
                });
                
                // Insert close button
                const modalContent = modal.querySelector('.modal-content');
                if (modalContent) {
                    // Insert at the beginning of modal content
                    modalContent.insertBefore(closeButton, modalContent.firstChild);
                } else {
                    // No modal content container, add directly to modal
                    modal.appendChild(closeButton);
                }
                
                // Add ESC key handler
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape' && modal.style.display !== 'none') {
                        modal.style.display = 'none';
                        
                        // Remove modal backdrop
                        const backdrop = document.querySelector('.modal-backdrop');
                        if (backdrop) {
                            backdrop.parentNode.removeChild(backdrop);
                        }
                        
                        // Remove modal-open class from body
                        document.body.classList.remove('modal-open');
                        document.body.style.overflow = '';
                        document.body.style.paddingRight = '';
                    }
                });
                
                // Also add click outside to close
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        modal.style.display = 'none';
                        
                        // Remove modal backdrop
                        const backdrop = document.querySelector('.modal-backdrop');
                        if (backdrop) {
                            backdrop.parentNode.removeChild(backdrop);
                        }
                        
                        // Remove modal-open class from body
                        document.body.classList.remove('modal-open');
                        document.body.style.overflow = '';
                        document.body.style.paddingRight = '';
                    }
                });
            }
        });
    }
    
    // Run when DOM is loaded
    addCloseButtonsToModals();
    
    // Also run whenever showConfigDetailModal is called
    const originalShowConfigDetailModal = window.showConfigDetailModal;
    if (typeof originalShowConfigDetailModal === 'function') {
        window.showConfigDetailModal = function() {
            // Call the original function
            originalShowConfigDetailModal.apply(this, arguments);
            
            // Add close buttons after the modal is shown
            setTimeout(addCloseButtonsToModals, 100);
        };
    }
    
    // Observe DOM for new modals
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.addedNodes && mutation.addedNodes.length > 0) {
                // Check if any modals were added
                for (let i = 0; i < mutation.addedNodes.length; i++) {
                    const node = mutation.addedNodes[i];
                    if (node.classList && 
                        (node.classList.contains('modal') || 
                         node.id === 'summary-modal' || 
                         node.id === 'component-detail-modal')) {
                        addCloseButtonsToModals();
                    }
                }
            }
        });
    });
    
    // Start observing
    observer.observe(document.body, { 
        childList: true, 
        subtree: true
    });
});
</script>

<!-- Script to ensure the modal displays properly -->
<script>
// Configuration detail modal display script removed
// This stub is kept to avoid breaking other code
function showComponentDetailModal() {
    console.log('Configuration detail modal has been removed');
}

function closeComponentDetailModal() {
    console.log('Configuration detail modal has been removed');
}

// Simplified event listeners
document.addEventListener('DOMContentLoaded', function() {
    // Connect to other buttons to just scroll to the config table
    const showConfigBtn = document.querySelector('#show-config-details');
    if (showConfigBtn) {
        showConfigBtn.addEventListener('click', function() {
            const configTable = document.getElementById('config-table');
            if (configTable) {
                configTable.scrollIntoView({ behavior: 'smooth' });
            }
        });
    }
    
    // Add global function stub
    window.showConfigDetailModal = showComponentDetailModal;
});
</script>

<!-- Create folder for component images if needed -->
<script>
// Create images/components directory if it doesn't exist
document.addEventListener('DOMContentLoaded', function() {
    // Check for image loading errors
    const componentImages = document.querySelectorAll('#component-detail-modal img');
    componentImages.forEach(function(img) {
        img.onerror = function() {
            // If the image fails to load, replace with a generic icon
            this.onerror = null;
            this.src = '';
            this.style.display = 'none';
            
            // Create icon element
            const icon = document.createElement('i');
            icon.className = getIconClassForComponentType(this.alt);
            icon.style.fontSize = '24px';
            icon.style.color = '#2196F3';
            this.parentNode.appendChild(icon);
        };
    });
    
    // Helper function to get appropriate icon class based on component type
    function getIconClassForComponentType(type) {
        switch(type.toLowerCase()) {
            case 'cpu': return 'fas fa-microchip';
            case 'mainboard': return 'fas fa-server';
            case 'vga': return 'fas fa-tv';
            case 'ram': return 'fas fa-memory';
            case 'ssd': return 'fas fa-hdd';
            case 'psu': return 'fas fa-bolt';
            case 'case': return 'fas fa-cube';
            case 'cooler': return 'fas fa-wind';
            default: return 'fas fa-desktop';
        }
    }
});
</script>

<!-- Update the button to match the design in screenshots - red background with white text -->
<div style="text-align: center; margin: 20px auto;">

<!-- FLOATING BUTTON REMOVED AS REQUESTED -->

<script>
// Connect the floating button
document.addEventListener('DOMContentLoaded', function() {
    const floatingBtn = document.getElementById('floating-config-btn');
    if (floatingBtn) {
        floatingBtn.addEventListener('click', function() {
            if (typeof showComponentDetailModal === 'function') {
                showComponentDetailModal();
            }
        });
    }
    
    // Also automatically try to show the modal after page load
    setTimeout(function() {
        if (typeof showComponentDetailModal === 'function') {
            showComponentDetailModal();
        }
    }, 2000);
});
</script>

<!-- Ensure both detail config buttons work -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Connect main detail button
    const detailBtn = document.getElementById('show-detail-config-btn');
    if (detailBtn) {
        detailBtn.addEventListener('click', function() {
            if (typeof showComponentDetailModal === 'function') {
                showComponentDetailModal();
            }
        });
    }
    
    // Connect show-all-config-tables button
    const showAllConfigBtn = document.getElementById('show-all-config-tables');
    if (showAllConfigBtn) {
        showAllConfigBtn.addEventListener('click', function() {
            if (typeof showComponentDetailModal === 'function') {
                showComponentDetailModal();
            }
        });
    }
    
    // Connect any button with HIỆN BẢNG CẤU HÌNH text
    const allButtons = document.querySelectorAll('button');
    allButtons.forEach(function(button) {
        const buttonText = button.textContent || button.innerText;
        if (buttonText.includes('HIỆN BẢNG') || buttonText.includes('HIỂN THỊ BẢNG')) {
            button.addEventListener('click', function() {
                if (typeof showComponentDetailModal === 'function') {
                    showComponentDetailModal();
                }
            });
        }
    });
    
    // Force show on page load - try multiple times
    const autoShowTimes = [1000, 2000, 3000, 5000];
    autoShowTimes.forEach(function(time) {
        setTimeout(function() {
            if (typeof showComponentDetailModal === 'function') {
                showComponentDetailModal();
            }
        }, time);
    });
});
</script>

<!-- Replace the image tags with Font Awesome icons -->
<script>
// Force the component detail modal to display immediately after load
window.addEventListener('load', function() {
    // Wait a bit for everything to initialize
    setTimeout(function() {
        const modal = document.getElementById('component-detail-modal');
        if (modal) {
            console.log('FINAL FIX: Forcing component-detail-modal visible');
            modal.style.display = 'block';
            modal.style.visibility = 'visible';
            modal.style.opacity = '1';
            
            // Replace all images with icons in the modal
            const imgElements = modal.querySelectorAll('img');
            imgElements.forEach(function(img) {
                const iconClass = getIconClassForComponent(img.alt || '');
                const iconElement = document.createElement('i');
                iconElement.className = iconClass;
                iconElement.style.fontSize = '32px';
                iconElement.style.color = '#0053b4';
                img.parentNode.replaceChild(iconElement, img);
            });
            
            // Create a backdrop if it doesn't exist
            if (!document.querySelector('.modal-backdrop')) {
                const backdrop = document.createElement('div');
                backdrop.className = 'modal-backdrop';
                backdrop.style.position = 'fixed';
                backdrop.style.top = '0';
                backdrop.style.left = '0';
                backdrop.style.width = '100%';
                backdrop.style.height = '100%';
                backdrop.style.backgroundColor = 'rgba(0,0,0,0.5)';
                backdrop.style.zIndex = '9998';
                document.body.appendChild(backdrop);
            }
            
            // Find all of the selected components by text
            updateSelectedComponentsInModal();
        }
    }, 1000);
    
    // Helper function to get icon class for component type
    function getIconClassForComponent(type) {
        type = type.toLowerCase();
        if (type.includes('cpu')) return 'fas fa-microchip';
        if (type.includes('mainboard')) return 'fas fa-server';
        if (type.includes('vga')) return 'fas fa-tv';
        if (type.includes('ram')) return 'fas fa-memory';
        if (type.includes('ssd')) return 'fas fa-hdd';
        if (type.includes('psu')) return 'fas fa-bolt';
        if (type.includes('case')) return 'fas fa-cube';
        if (type.includes('cooler')) return 'fas fa-wind';
        return 'fas fa-desktop';
    }
    
    // Function to update the modal with selected components
    function updateSelectedComponentsInModal() {
        // Get selected components from dropdowns
        const components = {
            'cpu': document.getElementById('cpu'),
            'mainboard': document.getElementById('mainboard'),
            'vga': document.getElementById('vga'),
            'ram': document.getElementById('ram'),
            'ssd': document.getElementById('ssd'),
            'psu': document.getElementById('psu'),
            'case': document.getElementById('case'),
            'cooler': document.getElementById('cpuCooler')
        };
        
        // Update modal elements with selected values
        for (const [key, dropdown] of Object.entries(components)) {
            if (dropdown && dropdown.selectedIndex > 0) {
                const selectedText = dropdown.options[dropdown.selectedIndex].text;
                const price = dropdown.options[dropdown.selectedIndex].dataset.price || '0';
                
                // Find the corresponding element in the modal
                const nameElement = document.getElementById(`modal-${key}-name`) || 
                                   document.getElementById(`modal-${key.replace('cooler', 'cpuCooler')}-name`);
                const priceElement = document.getElementById(`modal-${key}-price`) || 
                                    document.getElementById(`modal-${key.replace('cooler', 'cpuCooler')}-price`);
                
                if (nameElement) nameElement.textContent = selectedText.split(' - ')[0];
                if (priceElement) priceElement.textContent = formatPrice(price) + ' VNĐ';
            }
        }
        
        // Update total price
        calculateAndUpdateTotalPrice();
    }
    
    // Helper function to format price
    function formatPrice(price) {
        price = String(price).replace(/[^\d]/g, '');
        return price.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
    }
    
    // Calculate and update total price
    function calculateAndUpdateTotalPrice() {
        const priceElements = document.querySelectorAll('[id$="-price"]');
        let total = 0;
        
        priceElements.forEach(function(element) {
            const priceText = element.textContent || '0';
            const price = parseInt(priceText.replace(/[^\d]/g, '')) || 0;
            total += price;
        });
        
        const totalElement = document.getElementById('modal-total-price');
        if (totalElement) {
            totalElement.textContent = formatPrice(total) + ' VNĐ';
        }
    }
});
</script>

<!-- Update modal content to use Font Awesome icons instead of images -->
<script>
// Replace all <img> tags in the component-detail-modal with Font Awesome icons
document.addEventListener('DOMContentLoaded', function() {
    // Make specific updates to the modal content
    const updateModalContent = function() {
        const cpuImageCell = document.querySelector('#component-detail-modal tr:nth-child(1) td:nth-child(2)');
        if (cpuImageCell) {
            cpuImageCell.innerHTML = '<i class="fas fa-microchip" style="font-size: 32px; color: #0053b4;"></i>';
        }
        
        const mainboardImageCell = document.querySelector('#component-detail-modal tr:nth-child(2) td:nth-child(2)');
        if (mainboardImageCell) {
            mainboardImageCell.innerHTML = '<i class="fas fa-server" style="font-size: 32px; color: #0053b4;"></i>';
        }
        
        const vgaImageCell = document.querySelector('#component-detail-modal tr:nth-child(3) td:nth-child(2)');
        if (vgaImageCell) {
            vgaImageCell.innerHTML = '<i class="fas fa-tv" style="font-size: 32px; color: #0053b4;"></i>';
        }
        
        const ramImageCell = document.querySelector('#component-detail-modal tr:nth-child(4) td:nth-child(2)');
        if (ramImageCell) {
            ramImageCell.innerHTML = '<i class="fas fa-memory" style="font-size: 32px; color: #0053b4;"></i>';
        }
        
        const ssdImageCell = document.querySelector('#component-detail-modal tr:nth-child(5) td:nth-child(2)');
        if (ssdImageCell) {
            ssdImageCell.innerHTML = '<i class="fas fa-hdd" style="font-size: 32px; color: #0053b4;"></i>';
        }
        
        const psuImageCell = document.querySelector('#component-detail-modal tr:nth-child(6) td:nth-child(2)');
        if (psuImageCell) {
            psuImageCell.innerHTML = '<i class="fas fa-bolt" style="font-size: 32px; color: #0053b4;"></i>';
        }
        
        const caseImageCell = document.querySelector('#component-detail-modal tr:nth-child(7) td:nth-child(2)');
        if (caseImageCell) {
            caseImageCell.innerHTML = '<i class="fas fa-cube" style="font-size: 32px; color: #0053b4;"></i>';
        }
        
        const coolerImageCell = document.querySelector('#component-detail-modal tr:nth-child(8) td:nth-child(2)');
        if (coolerImageCell) {
            coolerImageCell.innerHTML = '<i class="fas fa-wind" style="font-size: 32px; color: #0053b4;"></i>';
        }
    };
    
    // Try to update immediately
    updateModalContent();
    
    // Also try after a delay to ensure the modal is created
    setTimeout(updateModalContent, 1500);
    setTimeout(updateModalContent, 3000);
    
    // Add a button to show selected components in the main UI
    const addShowComponentsButton = function() {
        // Function completely disabled
        return;
    };
    
    // Remove the button adding function
    // setTimeout(addShowComponentsButton, 2000);
});
</script>

<!-- Direct fix for component selection section visibility -->
<style>
#component-selection, #selected-components, #additional-selection, 
.selection-section, .component, #selected-components-list {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

/* Force all component dropdowns to be visible */
.component select {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    width: 100% !important;
    padding: 8px !important;
    border: 1px solid #ddd !important;
    border-radius: 4px !important;
    background-color: white !important;
}

/* Ensure selected components display properly */
.selected-component-item {
    display: flex !important;
    align-items: center !important;
    margin: 10px 0 !important;
    padding: 10px !important;
    background-color: #f5f5f5 !important;
    border-radius: 5px !important;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1) !important;
}
</style>

<!-- SHOW-FULL-UI BUTTON REMOVED AS REQUESTED -->

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add handler for the show full UI button
    const showFullUiBtn = document.getElementById('show-full-ui-btn');
    if (showFullUiBtn) {
        showFullUiBtn.addEventListener('click', function() {
            // Show all important sections
            const sections = [
                'component-selection',
                'selected-components',
                'additional-selection',
                'config-table',
                'selected-components-list'
            ];
            
            sections.forEach(function(id) {
                const element = document.getElementById(id);
                if (element) {
                    element.style.display = 'block';
                    element.style.visibility = 'visible';
                    element.style.opacity = '1';
                    
                    // Scroll to the element
                    element.scrollIntoView({ behavior: 'smooth' });
                }
            });
            
            // Show all selection sections
            document.querySelectorAll('.selection-section').forEach(function(section) {
                section.style.display = 'block';
                section.style.visibility = 'visible';
                section.style.opacity = '1';
            });
            
            // Also force the config detail modal to display
            if (typeof showComponentDetailModal === 'function') {
                showComponentDetailModal();
            }
        });
    }
});
</script>

<!-- Fix for component images and modal display -->
<script>
// Replace all images with Font Awesome icons in the modal
function replaceImagesWithIcons() {
    const modal = document.getElementById('component-detail-modal');
    if (!modal) return;
    
    // CPU
    const cpuCell = modal.querySelector('tr:nth-child(1) td:nth-child(2)');
    if (cpuCell) cpuCell.innerHTML = '<i class="fas fa-microchip" style="font-size: 32px; color: #0053b4;"></i>';
    
    // Mainboard
    const mainboardCell = modal.querySelector('tr:nth-child(2) td:nth-child(2)');
    if (mainboardCell) mainboardCell.innerHTML = '<i class="fas fa-server" style="font-size: 32px; color: #0053b4;"></i>';
    
    // VGA
    const vgaCell = modal.querySelector('tr:nth-child(3) td:nth-child(2)');
    if (vgaCell) vgaCell.innerHTML = '<i class="fas fa-tv" style="font-size: 32px; color: #0053b4;"></i>';
    
    // RAM
    const ramCell = modal.querySelector('tr:nth-child(4) td:nth-child(2)');
    if (ramCell) ramCell.innerHTML = '<i class="fas fa-memory" style="font-size: 32px; color: #0053b4;"></i>';
    
    // SSD
    const ssdCell = modal.querySelector('tr:nth-child(5) td:nth-child(2)');
    if (ssdCell) ssdCell.innerHTML = '<i class="fas fa-hdd" style="font-size: 32px; color: #0053b4;"></i>';
    
    // PSU
    const psuCell = modal.querySelector('tr:nth-child(6) td:nth-child(2)');
    if (psuCell) psuCell.innerHTML = '<i class="fas fa-bolt" style="font-size: 32px; color: #0053b4;"></i>';
    
    // Case
    const caseCell = modal.querySelector('tr:nth-child(7) td:nth-child(2)');
    if (caseCell) caseCell.innerHTML = '<i class="fas fa-cube" style="font-size: 32px; color: #0053b4;"></i>';
    
    // Cooler
    const coolerCell = modal.querySelector('tr:nth-child(8) td:nth-child(2)');
    if (coolerCell) coolerCell.innerHTML = '<i class="fas fa-wind" style="font-size: 32px; color: #0053b4;"></i>';
}

// Force modal to be visible
function forceModalVisible() {
    const modal = document.getElementById('component-detail-modal');
    if (modal) {
        console.log('Forcing modal to be visible');
        modal.style.display = 'block !important';
        modal.style.visibility = 'visible !important';
        modal.style.opacity = '1 !important';
        
        // Replace images with icons
        replaceImagesWithIcons();
    }
}

// Run on page load
window.addEventListener('load', function() {
    // Try multiple times to ensure it works
    setTimeout(forceModalVisible, 1000);
    setTimeout(forceModalVisible, 2000);
    setTimeout(forceModalVisible, 3000);
});

// Run when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
    // Connect all buttons to show the modal
    document.querySelectorAll('button').forEach(function(button) {
        const text = button.textContent || button.innerText;
        if (text.includes('CHI TIẾT') || text.includes('CẤU HÌNH')) {
            button.addEventListener('click', function() {
                setTimeout(forceModalVisible, 100);
            });
        }
    });
});
</script>

<!-- Styles to force visibility of important elements -->
<style>
#component-selection, #additional-selection, 
.selection-section, .component, #selected-components-list,
#config-table, .config-table, #selected-components {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

#component-detail-modal {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    z-index: 10000 !important;
}

/* Make all tables visible */
table {
    display: table !important;
    visibility: visible !important;
    opacity: 1 !important;
}
</style>



<!-- Additional CSS to ensure visibility -->
<style>
/* Force visibility for config table and selection sections */
#config-table, .config-table, 
#component-selection, #selected-components, 
#additional-selection, .selection-section,
.component, #selected-components-list,
#total-price {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

/* Force all tables to display properly */
table {
    display: table !important;
    visibility: visible !important;
    opacity: 1 !important;
    width: 100% !important;
    border-collapse: collapse !important;
}

tr {
    display: table-row !important;
    visibility: visible !important;
}

td, th {
    display: table-cell !important;
    visibility: visible !important;
    padding: 8px !important;
    border: 1px solid #ddd !important;
}

/* Style modal correctly but hide it by default */
#component-detail-modal {
    display: none; /* Hide by default */
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    background-color: rgba(0,0,0,0.5) !important;
    z-index: 10000 !important;
    overflow-y: auto !important;
}

.modal-dialog {
    margin: 30px auto !important;
    max-width: 800px !important;
    background: white !important;
    border-radius: 5px !important;
    overflow: hidden !important;
    box-shadow: 0 5px 15px rgba(0,0,0,0.5) !important;
}

.modal-content {
    position: relative !important;
}

.modal-header {
    background-color: #2196F3 !important;
    color: white !important;
    padding: 15px !important;
    position: relative !important;
}

.modal-body {
    padding: 0 !important;
}

/* Style for buttons */
button {
    cursor: pointer !important;
}

/* Hide preloaders and placeholders */
.preloader, .placeholder, .loading-overlay {
    display: none !important;
}
</style>

<!-- Fix for component images in config table -->
<script>
// Replace all images in config table with Font Awesome icons
document.addEventListener('DOMContentLoaded', function() {
    // Image cells in the config table
    var imageCells = {
        'cpu-image': 'fa-microchip',
        'mainboard-image': 'fa-server',
        'vga-image': 'fa-tv',
        'ram-image': 'fa-memory',
        'ssd-image': 'fa-hdd',
        'cpu-cooler-image': 'fa-wind',
        'psu-image': 'fa-bolt',
        'case-image': 'fa-cube',
        'hdd-image': 'fa-hdd',
        'monitor-image': 'fa-desktop'
    };
    
    // Replace each image cell with an icon
    Object.entries(imageCells).forEach(([cellId, iconClass]) => {
        const cell = document.getElementById(cellId);
        if (cell) {
            cell.innerHTML = `<i class="fas ${iconClass}" style="font-size: 32px; color: #0053b4;"></i>`;
        }
    });
});
</script>

<!-- Script for image handling -->
<script>
// Handle image replacement for component icons
window.addEventListener('load', function() {
    // Replace broken images with icons based on component type
    document.querySelectorAll('img').forEach(img => {
        if (img.naturalWidth === 0) {
            const type = img.alt ? img.alt.toLowerCase() : '';
            
            const iconClass = 
                type.includes('cpu') ? 'fas fa-microchip' :
                type.includes('mainboard') ? 'fas fa-server' :
                type.includes('vga') ? 'fas fa-tv' :
                type.includes('ram') ? 'fas fa-memory' :
                type.includes('ssd') || type.includes('hdd') ? 'fas fa-hdd' :
                type.includes('psu') ? 'fas fa-bolt' :
                type.includes('case') ? 'fas fa-cube' :
                type.includes('cooler') ? 'fas fa-wind' :
                'fas fa-desktop';
            
            const icon = document.createElement('i');
            icon.className = iconClass;
            icon.style.cssText = 'font-size: 32px; color: #0053b4;';
            
            if (img.parentNode) {
                img.parentNode.replaceChild(icon, img);
            }
        }
    });
    
    // Style modal content properly
    const modal = document.getElementById('component-detail-modal');
    if (modal) {
        const modalContent = modal.querySelector('.modal-content');
        if (modalContent) {
            modalContent.style.cssText = 'position: relative !important; background-color: white !important; margin: 30px auto !important; padding: 0 !important; border-radius: 5px !important; max-width: 800px !important; box-shadow: 0 5px 15px rgba(0,0,0,0.5) !important;';
        }
    }
});
</script>

<script>
// Add event listeners to the buttons to show modal on click
document.addEventListener('DOMContentLoaded', function() {
    // Button to show detailed configuration
    const calculateButton = document.getElementById('calculate-button');
    if (calculateButton) {
        calculateButton.addEventListener('click', function() {
            // First update and show the config table
            const configTable = document.getElementById('config-table');
            if (configTable) {
                // Update component images and table data
                if (typeof window.updateConfigTableImages === 'function') {
                    window.updateConfigTableImages();
                }
                // Show the table
                configTable.style.display = 'block';
                // Scroll to the table
                configTable.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
            
            // Then try to show the modal if components are selected
            if (typeof window.showConfigDetailModal === 'function') {
                window.showConfigDetailModal();
            }
        });
    }
    
    // Button to show detailed configuration from inside the table
    const showConfigDetailsButton = document.getElementById('show-config-details');
    if (showConfigDetailsButton) {
        showConfigDetailsButton.addEventListener('click', function() {
            if (typeof window.showConfigDetailModal === 'function') {
                window.showConfigDetailModal();
            }
        });
    }
    
    // Button to show all config tables
    const showAllConfigTablesButton = document.getElementById('show-all-config-tables');
    if (showAllConfigTablesButton) {
        showAllConfigTablesButton.addEventListener('click', function() {
            const configTable = document.getElementById('config-table');
            if (configTable) {
                // Update component images and table data
                if (typeof window.updateConfigTableImages === 'function') {
                    window.updateConfigTableImages();
                }
                // Show the table
                configTable.style.display = 'block';
                // Scroll to the table
                configTable.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
    }
    
    // Close button in modal
    const closeModalButton = document.querySelector('#component-detail-modal .close');
    if (closeModalButton) {
        closeModalButton.addEventListener('click', function() {
            const modal = document.getElementById('component-detail-modal');
            if (modal) {
                modal.style.display = 'none';
            }
        });
    }
});
</script>

<!-- This script runs immediately to remove unwanted elements -->
<script>
// This script runs immediately to remove unwanted elements
(function() {
    // Function to remove unwanted elements
    function removeUnwantedElements() {
        // List of IDs to remove
        const elementsToRemove = [
            'selected-components',
            'compatibility-alert',
            'total-price',
            'show-all-config-tables',
            'floating-config-btn',
            'show-full-ui-btn',
            'show-selected-components-btn'
        ];
        
        // Remove elements by ID
        elementsToRemove.forEach(id => {
            const element = document.getElementById(id);
            if (element) {
                console.log('Removing element:', id);
                element.remove();
            }
        });
        
        // Remove elements by selector
        const selectorsToRemove = [
            'div.tooltip-container', 
            'div[style*="position: fixed"]',
            'div[style*="text-align: center; margin: 20px 0px"] button#show-selected-components-btn'
        ];
        
        selectorsToRemove.forEach(selector => {
            document.querySelectorAll(selector).forEach(element => {
                console.log('Removing element by selector:', selector);
                element.remove();
            });
        });
    }
    
    // Run immediately
    removeUnwantedElements();
    
    // Also run after DOM content loaded
    document.addEventListener('DOMContentLoaded', removeUnwantedElements);
    
    // Also run after window load
    window.addEventListener('load', removeUnwantedElements);
    
    // Run periodically to catch any dynamically added elements
    setInterval(removeUnwantedElements, 1000);
})();
</script>

